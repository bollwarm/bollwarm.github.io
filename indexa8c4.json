{"id":660,"date":"2014-09-20T21:16:21","date_gmt":"2014-09-20T13:16:21","guid":{"rendered":"http:\/\/ijz.me\/?p=660"},"modified":"2014-09-20T21:16:21","modified_gmt":"2014-09-20T13:16:21","slug":"ssh%e9%9a%a7%e9%81%93%e5%8f%8a%e5%85%b6%e7%94%a8%e6%b3%95","status":"publish","type":"post","link":"http:\/\/ijz.me\/?p=660","title":{"rendered":"ssh\u96a7\u9053\u53ca\u5176\u7528\u6cd5"},"content":{"rendered":"<p>&nbsp;<\/p>\n<div class=\"entry-content\">\n<h3>\u4f55\u8c13SSH\u96a7\u9053<\/h3>\n<p>\u96a7\u9053\u662f\u4e00\u79cd\u628a\u4e00\u79cd\u7f51\u7edc\u534f\u8bae\u5c01\u88c5\u8fdb\u53e6\u5916\u4e00\u79cd\u7f51\u7edc\u534f\u8bae\u8fdb\u884c\u4f20\u8f93\u7684\u6280\u672f\u3002\u8fd9\u91cc\u6211\u4eec\u7814\u7a76ssh\u96a7\u9053\uff0c\u6240\u4ee5\u6240\u6709\u7684\u7f51\u7edc\u901a\u8baf\u90fd\u662f\u52a0\u5bc6\u7684\u3002\u53c8\u88ab\u79f0\u4f5c\u7aef\u53e3\u8f6c\u53d1\uff0c\u56e0\u4e3assh\u96a7\u9053\u901a\u5e38\u4f1a\u7ed1\u5b9a\u4e00\u4e2a\u672c\u5730\u7aef\u53e3\uff0c\u6240\u6709\u53d1\u5411\u8fd9\u4e2a\u7aef\u53e3\u7aef\u53e3\u7684\u6570\u636e\u5305\uff0c\u90fd\u4f1a\u88ab\u52a0\u5bc6\u5e76\u900f\u660e\u5730\u4f20\u8f93\u5230\u8fdc\u7aef\u7cfb\u7edf\u3002<\/p>\n<h3>SSH\u96a7\u9053\u7684\u7c7b\u578b<\/h3>\n<p>ssh\u96a7\u9053\u67093\u79cd\u7c7b\u578b\uff1a<\/p>\n<ol>\n<li>\u52a8\u6001\u7aef\u53e3\u8f6c\u53d1\uff08Socks \u4ee3\u7406\uff09 -D<\/li>\n<li>\u672c\u5730\u7aef\u53e3\u8f6c\u53d1\u00a0 -L<\/li>\n<li>\u8fdc\u7aef\u7aef\u53e3\u8f6c\u53d1 -R<\/li>\n<\/ol>\n<p><!--more--><\/p>\n<h3>\u52a8\u6001\u7aef\u53e3\u8f6c\u53d1<\/h3>\n<p>\u52a8\u6001\u7aef\u53e3\u5141\u8bb8\u901a\u8fc7\u914d\u7f6e\u4e00\u4e2a\u672c\u5730\u7aef\u53e3\uff0c\u628a\u901a\u8fc7\u96a7\u9053\u5230\u6570\u636e\u8f6c\u53d1\u5230\u8fdc\u7aef\u7684\u6240\u6709\u5730\u5740\u3002\u672c\u5730\u7684\u5e94\u7528\u7a0b\u5e8f\u9700\u8981\u4f7f\u7528Socks\u534f\u8bae\u4e0e\u672c\u5730\u7aef\u53e3\u901a\u8baf\u3002\u6b64\u65f6SSH\u5145\u5f53Socks\u4ee3\u7406\u670d\u52a1\u5668\u7684\u89d2\u8272\u3002<\/p>\n<p><strong>\u547d\u4ee4\u683c\u5f0f<\/strong><\/p>\n<pre><code>ssh -D [bind_address:]port\n<\/code><\/pre>\n<p><strong>\u53c2\u6570\u8bf4\u660e<\/strong><\/p>\n<ul>\n<li>bind_address \u6307\u5b9a\u7ed1\u5b9a\u7684IP\u5730\u5740\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4f1a\u7ed1\u5b9a\u5728\u672c\u5730\u7684\u56de\u73af\u5730\u5740\uff08\u5373127.0.0.1\uff09\uff0c\u5982\u679c\u7a7a\u503c\u6216\u8005\u4e3a<code>*<\/code>\u4f1a\u7ed1\u5b9a\u672c\u5730\u6240\u6709\u7684IP\u5730\u5740\uff0c\u5982\u679c\u5e0c\u671b\u7ed1\u5b9a\u7684\u7aef\u53e3\u4ec5\u4f9b\u672c\u673a\u4f7f\u7528\uff0c\u53ef\u4ee5\u6307\u5b9a\u4e3a<code>localhost<\/code>\u3002<\/li>\n<li>port \u6307\u5b9a\u672c\u5730\u7ed1\u5b9a\u7684\u7aef\u53e3<\/li>\n<\/ul>\n<p><strong>\u4f7f\u7528\u573a\u666f<\/strong><\/p>\n<p>\u5047\u8bbeX\u7f51\u7edc\uff08192.168.18.0\/24\uff09\u6709\u4e3b\u673aA\uff08192.168.18.100\uff09,Y\u7f51\u7edc\uff08192.168.2.0\/24\uff09\u6709\u4e3b\u673aB\uff08192.168.2.100\uff09\u548c\u4e3b\u673aC\uff08192.168.2.101\uff09\uff0c\u5df2\u77e5\u4e3b\u673aA\u53ef\u4ee5\u8fde\u63a5\u4e3b\u673aB\uff0c\u4f46\u65e0\u6cd5\u8fde\u63a5\u4e3b\u673aC\u3002<\/p>\n<p>\u5728\u4e3b\u673aA\u6267\u884c<\/p>\n<pre><code>$ ssh -D localhost:8080 root@192.168.2.100\n<\/code><\/pre>\n<p>\u7136\u540e\u4e3b\u673aA\u4e0a\u7684\u5e94\u7528\u7a0b\u5e8f\u5c31\u53ef\u4ee5\u901a\u8fc7<\/p>\n<pre><code>SOCKS5 localhost:8080\n<\/code><\/pre>\n<p>\u8bbf\u95ee\u4e3b\u673aC\u4e0a\u7684\u670d\u52a1\u3002<\/p>\n<p><strong>\u4f18\u70b9<\/strong><\/p>\n<ul>\n<li>\u914d\u7f6e\u4e00\u4e2a\u4ee3\u7406\u670d\u52a1\u5c31\u53ef\u4ee5\u8bbf\u95ee\u8fdc\u7aef\u673a\u5668\u548c\u4e0e\u5176\u6240\u5728\u5b50\u7f51\u7edc\u7684\u6240\u6709\u670d\u52a1<\/li>\n<\/ul>\n<p><strong>\u7f3a\u70b9<\/strong><\/p>\n<ul>\n<li>\u5e94\u7528\u7a0b\u5e8f\u9700\u8981\u989d\u5916\u914d\u7f6eSOCKS\u4ee3\u7406\uff0c\u82e5\u5e94\u7528\u7a0b\u5e8f\u4e0d\u652f\u6301\u4ee3\u7406\u914d\u7f6e\u5219\u65e0\u6cd5\u4f7f\u7528<\/li>\n<\/ul>\n<h3>\u672c\u5730\u7aef\u53e3\u8f6c\u53d1<\/h3>\n<p>\u901a\u8fc7SSH\u96a7\u9053\uff0c\u5c06\u4e00\u4e2a\u8fdc\u7aef\u673a\u5668\u80fd\u591f\u8bbf\u95ee\u5230\u7684\u5730\u5740\u548c\u7aef\u53e3\uff0c\u6620\u5c04\u4e3a\u4e00\u4e2a\u672c\u5730\u7684\u7aef\u53e3\u3002<\/p>\n<p><a class=\"fancybox\" title=\"\u672c\u5730\u7aef\u53e3\u8f6c\u53d1\" href=\"http:\/\/codelife.me\/images\/post\/2012-12-09\/local_forwarding.jpg\" rel=\"gallery0\"><img decoding=\"async\" src=\"http:\/\/codelife.me\/images\/post\/2012-12-09\/local_forwarding.jpg\" alt=\"\u672c\u5730\u7aef\u53e3\u8f6c\u53d1\" \/><\/a><span class=\"caption\">\u672c\u5730\u7aef\u53e3\u8f6c\u53d1<\/span><\/p>\n<p><strong>\u547d\u4ee4\u683c\u5f0f<\/strong><\/p>\n<pre><code>ssh -L [bind_address:]port:host:hostport\n<\/code><\/pre>\n<p><strong>\u53c2\u6570\u8bf4\u660e<\/strong><\/p>\n<ul>\n<li>bind_address \u6307\u5b9a\u7ed1\u5b9a\u7684IP\u5730\u5740\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4f1a\u7ed1\u5b9a\u5728\u672c\u5730\u7684\u56de\u73af\u5730\u5740\uff08\u5373127.0.0.1\uff09\uff0c\u5982\u679c\u7a7a\u503c\u6216\u8005\u4e3a<code>*<\/code>\u4f1a\u7ed1\u5b9a\u672c\u5730\u6240\u6709\u7684IP\u5730\u5740\uff0c\u5982\u679c\u5e0c\u671b\u7ed1\u5b9a\u7684\u7aef\u53e3\u4ec5\u4f9b\u672c\u673a\u4f7f\u7528\uff0c\u53ef\u4ee5\u6307\u5b9a\u4e3a<code>localhost<\/code>\u3002<\/li>\n<li>port \u6307\u5b9a\u672c\u5730\u7ed1\u5b9a\u7684\u7aef\u53e3<\/li>\n<li>host \u6307\u5b9a\u6570\u636e\u5305\u8f6c\u53d1\u76ee\u6807\u5730\u5740\u7684IP\uff0c\u5982\u679c\u76ee\u6807\u4e3b\u673a\u548cssh server\u662f\u540c\u4e00\u53f0\u4e3b\u673a\u65f6\u8be5\u53c2\u6570\u6307\u5b9a\u4e3a<code>localhost<\/code><\/li>\n<li>host_port \u6307\u5b9a\u6570\u636e\u5305\u8f6c\u53d1\u76ee\u6807\u7aef\u53e3<\/li>\n<\/ul>\n<p><strong>\u4f7f\u7528\u573a\u666f<\/strong><\/p>\n<p>\u5047\u8bbeX\u7f51\u7edc\uff08192.168.18.0\/24\uff09\u6709\u4e3b\u673aA\uff08192.168.18.100\uff09,Y\u7f51\u7edc\uff08192.168.2.0\/24\uff09\u6709\u4e3b\u673a B\uff08192.168.2.100\uff09\u548c\u4e3b\u673aC\uff08192.168.2.101\uff09\uff0c\u5df2\u77e5\u4e3b\u673aA\u53ef\u4ee5\u8fde\u63a5\u4e3b\u673aB\uff0c\u4f46\u65e0\u6cd5\u8fde\u63a5\u4e3b\u673aC\u3002A\u4e3b\u673a\u9700\u8981\u8bbf\u95eeC\u4e3b\u673a\u7684VNC \u670d\u52a1\uff085900\u7aef\u53e3\uff09<\/p>\n<p>\u5728A\u4e3b\u673a\u4e0a\u5efa\u7acb\u672c\u5730\u8f6c\u53d1\u7aef\u53e35901<\/p>\n<pre><code>$ ssh -L 5901:192.168.2.101:5900 root@192.168.2.100\n<\/code><\/pre>\n<p>\u7136\u540e\u672c\u5730vnc\u5ba2\u6237\u7aef\u901a\u8fc75901\u7aef\u53e3\u6253\u5f00c\u4e3b\u673a\u7684vnc\u670d\u52a1<\/p>\n<pre><code>$ open vnc:\/\/localhost:5901\n<\/code><\/pre>\n<p><strong>\u4f18\u70b9<\/strong><\/p>\n<ul>\n<li>\u65e0\u9700\u8bbe\u7f6e\u4ee3\u7406<\/li>\n<\/ul>\n<p><strong>\u7f3a\u70b9<\/strong><\/p>\n<ul>\n<li>\u6bcf\u4e2a\u670d\u52a1\u90fd\u9700\u8981\u914d\u7f6e\u4e0d\u540c\u7684\u7aef\u53e3\u8f6c\u53d1<\/li>\n<\/ul>\n<h3>\u8fdc\u7aef\u7aef\u53e3\u8f6c\u53d1<\/h3>\n<p>\u8fdc\u7a0b\u7aef\u53e3\u8f6c\u53d1\u7528\u4e8e\u67d0\u4e9b\u5355\u5411\u963b\u9694\u7684\u5185\u7f51\u73af\u5883\uff0c\u6bd4\u5982\u8bf4NAT\uff0c\u7f51\u7edc\u9632\u706b\u5899\u3002\u5728NAT\u8bbe\u5907\u4e4b\u540e\u7684\u5185\u7f51\u4e3b\u673a\u53ef\u4ee5\u76f4\u63a5\u8bbf\u95ee\u516c\u7f51\u4e3b\u673a\uff0c\u4f46\u5916\u7f51\u4e3b\u673a\u5374\u65e0\u6cd5\u8bbf\u95ee\u5185\u7f51 \u4e3b\u673a\u7684\u670d\u52a1\u3002\u5982\u679c\u5185\u7f51\u4e3b\u673a\u5411\u5916\u7f51\u4e3b\u673a\u5efa\u7acb\u4e00\u4e2a\u8fdc\u7a0b\u8f6c\u53d1\u7aef\u53e3\uff0c\u5c31\u53ef\u4ee5\u8ba9\u5916\u7f51\u4e3b\u673a\u901a\u8fc7\u8be5\u7aef\u53e3\u8bbf\u95ee\u8be5\u5185\u7f51\u4e3b\u673a\u7684\u670d\u52a1\u3002\u53ef\u4ee5\u628a\u8fd9\u4e2a\u5185\u7f51\u4e3b\u673a\u7406\u89e3\u4e3a\u201c\u5185\u5e94\u201d\u548c\u201c\u5f00\u95e8 \u8005\u201d\u3002<\/p>\n<p><a class=\"fancybox\" title=\"\u8fdc\u7aef\u7aef\u53e3\u8f6c\u53d1\" href=\"http:\/\/codelife.me\/images\/post\/2012-12-09\/remote_forwarding.jpg\" rel=\"gallery0\"><img decoding=\"async\" src=\"http:\/\/codelife.me\/images\/post\/2012-12-09\/remote_forwarding.jpg\" alt=\"\u8fdc\u7aef\u7aef\u53e3\u8f6c\u53d1\" \/><\/a><span class=\"caption\">\u8fdc\u7aef\u7aef\u53e3\u8f6c\u53d1<\/span><\/p>\n<p><strong>\u547d\u4ee4\u683c\u5f0f<\/strong><\/p>\n<pre><code>ssh -R [bind_address:]port:host:hostport\n<\/code><\/pre>\n<p><strong>\u53c2\u6570\u8bf4\u660e<\/strong><\/p>\n<ul>\n<li>bind_address \u6307\u5b9a\u7ed1\u5b9a\u7684IP\u5730\u5740\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4f1a\u7ed1\u5b9a\u5728\u672c\u5730\u7684\u56de\u73af\u5730\u5740\uff08\u5373127.0.0.1\uff09\uff0c\u5982\u679c\u7a7a\u503c\u6216\u8005\u4e3a<code>*<\/code>\u4f1a\u7ed1\u5b9a\u672c\u5730\u6240\u6709\u7684IP\u5730\u5740\uff0c\u5982\u679c\u5e0c\u671b\u7ed1\u5b9a\u7684\u7aef\u53e3\u4ec5\u4f9b\u672c\u673a\u4f7f\u7528\uff0c\u53ef\u4ee5\u6307\u5b9a\u4e3a<code>localhost<\/code>\u3002<\/li>\n<li>port \u6307\u5b9a\u672c\u5730\u7ed1\u5b9a\u7684\u7aef\u53e3<\/li>\n<li>host \u6307\u5b9a\u6570\u636e\u5305\u8f6c\u53d1\u6e90\u5730\u5740\u7684IP\uff0c\u5982\u679c\u6e90\u4e3b\u673a\u548cssh server\u662f\u540c\u4e00\u53f0\u4e3b\u673a\u65f6\u8be5\u53c2\u6570\u6307\u5b9a\u4e3a<code>localhost<\/code><\/li>\n<li>host_port \u6307\u5b9a\u6570\u636e\u5305\u8f6c\u53d1\u6e90\u7aef\u53e3<\/li>\n<\/ul>\n<p><strong>\u4f7f\u7528\u573a\u666f<\/strong><\/p>\n<p>\u5047\u8bbeX\u7f51\u7edc\uff08192.168.18.0\/24\uff09\u6709\u4e3b\u673aA\uff08192.168.18.100\uff09,Y\u7f51\u7edc\uff08192.168.2.0\/24\uff09\u6709\u4e3b\u673a B\uff08192.168.2.100\uff09\u548c\u4e3b\u673aC\uff08192.168.2.101\uff09\uff0c\u5df2\u77e5\u4e3b\u673aA\u53ef\u4ee5\u901a\u8fc7SSH\u8bbf\u95ee\u767b\u5f55B\u4e3b\u673a\uff0c\u4f46\u53cd\u5411\u76f4\u63a5\u8fde\u63a5\u88ab\u7981\u6b62\uff0c\u4e3b\u673aB\u548c\u4e3b \u673aC\u53ef\u4ee5\u76f8\u4e92\u8bbf\u95ee\u3002\u82e5\u4e3b\u673aC\u60f3\u8bbf\u95ee\u4e3b\u673aA\u7684VNC\u670d\u52a1\uff085900\u7aef\u53e3\uff09\u3002<\/p>\n<p>\u5728\u4e3b\u673aA\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff0c\u5f00\u653eB\u4e3b\u673a\u8fdc\u7aef\u7aef\u53e3\u8f6c\u53d1\u3002<\/p>\n<pre><code>$ ssh -R 5900:192.168.2.100:5901 root@192.168.2.100\n<\/code><\/pre>\n<p>\u7136\u540e\u4e3b\u673aC\u8fde\u63a5\u4e3b\u673aB\u76845901\u7aef\u53e3<\/p>\n<pre><code>$ open vnc:\/\/192.168.2.100:5901\n<\/code><\/pre>\n<p><strong>\u4f18\u70b9<\/strong><\/p>\n<ul>\n<li>\u53ef\u4ee5\u7a7f\u8d8a\u9632\u706b\u5899\u548cNAT\u8bbe\u5907<\/li>\n<\/ul>\n<p><strong>\u7f3a\u70b9<\/strong><\/p>\n<ul>\n<li>\u6bcf\u4e2a\u670d\u52a1\u90fd\u9700\u8981\u914d\u7f6e\u4e0d\u540c\u7684\u7aef\u53e3\u8f6c\u53d1<\/li>\n<\/ul>\n<h3>\u5982\u4f55\u7981\u6b62\u7aef\u53e3\u8f6c\u53d1<\/h3>\n<p>\u8bbe\u7f6essh\u670d\u52a1\u914d\u7f6e\u6587\u4ef6<code>\/etc\/ssh\/sshd_config<\/code><\/p>\n<pre><code>AllowTcpForwarding no\n<\/code><\/pre>\n<h3>\u53c2\u8003\u6587\u732e<\/h3>\n<ol>\n<li><a href=\"http:\/\/chamibuddhika.wordpress.com\/2012\/03\/21\/ssh-tunnelling-explained\/\">SSH Tunneling Explained<\/a><\/li>\n<li><a href=\"http:\/\/www.ramkitech.com\/2012\/04\/how-to-do-ssh-tunneling-port-forwarding.html\">How to do SSH Tunneling (Port Forwarding) <\/a><\/li>\n<li><a href=\"http:\/\/www.liugj.com\/2013\/04\/SSH-port-forwarding\/\">SSH\u7aef\u53e3\u8f6c\u53d1\u4ee5\u53ca\u5e94\u7528\u5b9e\u4f8b<\/a><\/li>\n<\/ol>\n<\/div>\n","protected":false},"excerpt":{"rendered":"<p>&nbsp; \u4f55\u8c13SSH\u96a7\u9053 \u96a7\u9053\u662f\u4e00\u79cd\u628a\u4e00\u79cd\u7f51\u7edc\u534f\u8bae\u5c01\u88c5\u8fdb\u53e6\u5916\u4e00\u79cd\u7f51\u7edc\u534f\u8bae\u8fdb\u884c\u4f20\u8f93\u7684\u6280\u672f\u3002\u8fd9\u91cc\u6211\u4eec\u7814\u7a76ssh [&hellip;]<\/p>\n","protected":false},"author":2,"featured_media":0,"comment_status":"open","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[2,6],"tags":[47],"class_list":["post-660","post","type-post","status-publish","format-standard","hentry","category-linux","category-6","tag-ssh"],"_links":{"self":[{"href":"http:\/\/ijz.me\/index.php?rest_route=\/wp\/v2\/posts\/660","targetHints":{"allow":["GET"]}}],"collection":[{"href":"http:\/\/ijz.me\/index.php?rest_route=\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/ijz.me\/index.php?rest_route=\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/ijz.me\/index.php?rest_route=\/wp\/v2\/users\/2"}],"replies":[{"embeddable":true,"href":"http:\/\/ijz.me\/index.php?rest_route=%2Fwp%2Fv2%2Fcomments&post=660"}],"version-history":[{"count":0,"href":"http:\/\/ijz.me\/index.php?rest_route=\/wp\/v2\/posts\/660\/revisions"}],"wp:attachment":[{"href":"http:\/\/ijz.me\/index.php?rest_route=%2Fwp%2Fv2%2Fmedia&parent=660"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/ijz.me\/index.php?rest_route=%2Fwp%2Fv2%2Fcategories&post=660"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/ijz.me\/index.php?rest_route=%2Fwp%2Fv2%2Ftags&post=660"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}