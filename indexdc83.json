{"id":12,"date":"2013-11-30T00:00:00","date_gmt":"2013-11-29T16:00:00","guid":{"rendered":"http:\/\/ijz.me\/?p=12"},"modified":"2013-11-30T00:00:00","modified_gmt":"2013-11-29T16:00:00","slug":"zzmysql%e6%95%b0%e6%8d%ae%e5%ba%93concat%e5%92%8coutfile%e5%87%bd%e6%95%b0%e5%a6%99%e7%94%a8","status":"publish","type":"post","link":"http:\/\/ijz.me\/?p=12","title":{"rendered":"\/zz\/MySQL\u6570\u636e\u5e93Concat\u548coutfile\u51fd\u6570\u5999\u7528"},"content":{"rendered":"<p>\u5927\u5bb6\u6709\u6ca1\u6709\u63a5\u89e6\u8fc7\u8fd9\u6837\u7684\u9700\u6c42\uff0c\u91c7\u96c6\u5386\u53f2\u6570\u636e\u5e93\u4e2d\u6216\u8005\u5176\u4ed6\u6570\u636e\u5e93\u4e2d\u7684\u67d0\u4e9b\u4fe1\u606f\uff0c\u8fd9\u4e9b\u4fe1\u606f\u662f\u53e6\u4e00\u4e2a\u670d\u52a1\u5668\u9700\u8981\u6267\u884csql\u7684\u6761\u4ef6\u3002\u901a\u5e38\u6211\u4eec\u7684\u5904\u7406\u624b\u6bb5\u662f\u628a\u8fd9\u4e2a\u4fe1\u606f\u901a\u8fc7sql\u627e\u51fa\u6765\u6216\u5bfc\u51fa\uff0c\u7136\u540e\u4f7f\u7528\u811a\u672c\u6216\u8005\u624b\u5de5\u62fc\u51d1\u65b0\u7684\u65b0\u7684sql\u8bed\u53e5\u3002\u5728\u5f88\u591a\u7d27\u6025\u60c5\u51b5\u4e0b(\u4ea7\u54c1bug\u3001\u6570\u636e\u9519\u4e71)\u4f1a\u4ea7\u751f\u8fd9\u6837\u7684\u9700\u6c42\uff0c\u8fd9\u4e2a\u65f6\u5019\u5904\u7406\u7684\u662f\u5728\u7ebf\u6570\u636e\u5e93\uff0c\u4e0d\u80fd\u6709\u4e00\u70b9\u9a6c\u864e\u3001\u5982\u679c\u6570\u636e\u91cf\u7a0d\u5fae\u5927\u4e00\u70b9\uff0cDBA\u4eec\u5c31\u591f\u7126\u5934\u70c2\u989d\u4e86\u3002\u6211\u4e4b\u524d\u4e5f\u591a\u6b21\u9047\u89c1\u8fd9\u79cd\u60c5\u51b5\uff0c\u6211\u628a\u4e00\u4e9b\u7ecf\u9a8c\u4ecb\u7ecd\u7ed9\u5927\u5bb6\u3002<\/p>\n<p><!--more--><br \/>\n\u5176\u5b9e\u8fd9\u79cd\u60c5\u51b5\u4e0b\u4f7f\u7528concat+out\u00a0file\u4f1a\u5f97\u5230\u4e8b\u534a\u529f\u500d\u7684\u6548\u679c\u3002<br \/>\n\u6bd4\u5982\u6211\u4eec\u9700\u8981\u627e\u5230user\u8868\u4e2d\u6628\u5929\u767b\u5f55\u8fc7\u7684\u7528\u6237\uff0c\u7136\u540e\u4fee\u6539\u4fee\u6539\u4ed6\u4eec\u7684garbage\u4e2d\u67d0\u4e2a\u7269\u54c1\u7684\u5c5e\u6027\u3002<br \/>\n\u7531\u4e8e\u6570\u636e\u5e93\u7684\u7ed3\u6784\uff0c\u53ea\u8bb0\u5f55\u7528\u6237\u6700\u540e\u4e00\u6b21\u767b\u5f55\u7684\u65f6\u95f4\uff0c\u6240\u4ee5\u5f53\u524d\u7684\u6570\u636e\u5e93\u4e2d\u4e0d\u80fd\u786e\u5b9a\u6628\u5929\u54ea\u4e9b\u7528\u6237\u767b\u5f55\u8fc7\u3002\u6211\u4eec\u9700\u8981\u4ece\u5907\u4efd\u4e2d\u53bb\u6316\u51fa\u54ea\u4e9b\u7528\u6237\u6628\u5929\u767b\u5f55\u8fc7\uff0c\u7136\u540e\u518d<\/p>\n<pre>update\u00a0garbage\u00a0set\u00a0data=value\u00a0where\u00a0id=xxx\u00a0and\u00a0num=value\uff1b<\/pre>\n<p>\u6211\u4eec\u901a\u5e38\u7684\u505a\u6cd5\u662f\u901a\u8fc7sql\u5728\u5907\u4efd\u6570\u636e\u4e2d\u627e\u5230\u5bf9\u5e94\u7684\u7528\u6237id\uff0c\u7136\u540e\u5bfc\u51fa\u5230\u4e00\u4e2a\u6587\u4ef6\u4e2d\uff0c\u901a\u8fc7\u811a\u672c\u6765\u5faa\u73af\u53d6id\uff0c\u81ea\u52a8\u751f\u6210\u8981\u6267\u884c\u7684sql\uff0c\u6216\u8005\u624b\u5de5\u751f\u6210\u8981\u6267\u884c\u7684sql\u3002<br \/>\n\u73b0\u5728\u6211\u4eec\u4f7f\u7528concat+out\u00a0file\u6765\u5b9e\u73b0\u3002<\/p>\n<p>\u5728\u91cd\u73b0\u5907\u4efd\u6570\u636e\u7684\u670d\u52a1\u5668\u4e0a\u3002<\/p>\n<pre>select\u00a0concat('update\u00a0garb103fage\u00a0set\u00a0data=value\u00a0where\u00a0id=',id,'and\u00a0num=value;')\u00a0from\u00a0user\u00a0into\u00a0outfile\u00a0\u00a0'\/tmp\/a.txt';<\/pre>\n<p>\u68c0\u67e5\u751f\u6210\u7684\u6587\u4ef6\u4ee5\u540e\uff0c\u5728\u7ebf\u4e0a\u670d\u52a1\u5668\u76f4\u63a5\u6267\u884c<\/p>\n<pre>source\u00a0\/tmp\/a.txt;<\/pre>\n<p>\u8fd9\u4e2a\u8bed\u53e5\u8fd8\u6709\u4e00\u4e2a\u5999\u7528\uff0c\u7528\u6765\u6740\u6389processlist\u4e2d\u7684\u67d0\u4e9b\u8fde\u63a5\uff0c\u7d22\u7136maatkit\u63d0\u4f9b\u4e86\u7c7b\u4f3c\u7684\u5de5\u5177\uff0c\u4f46\u662f\u8fd8\u662f\u6ca1\u6709mysql\u81ea\u5df1\u6765\u5b8c\u6210\u65b9\u4fbf\u3002<\/p>\n<p>\u751f\u6210\u6740\u8fde\u63a5\u7684\u8bed\u53e5\uff0c\u5f53\u7136\u4f60\u53ef\u4ee5\u4f7f\u7528where\u6761\u4ef6\u8fc7\u6ee4\u67d0\u4e9b\u7c7b\u578b\u7684\u8fde\u63a5\u3002<\/p>\n<pre>select\u00a0concat('KILL\u00a0',id,';')\u00a0from\u00a0information_schema.processlist\u00a0into\u00a0outfile\u00a0\u00a0'\/tmp\/kill.txt';source\u00a0\/tmp\/kill.txt;<\/pre>\n<p>&nbsp;<\/p>\n","protected":false},"excerpt":{"rendered":"<p>\u5927\u5bb6\u6709\u6ca1\u6709\u63a5\u89e6\u8fc7\u8fd9\u6837\u7684\u9700\u6c42\uff0c\u91c7\u96c6\u5386\u53f2\u6570\u636e\u5e93\u4e2d\u6216\u8005\u5176\u4ed6\u6570\u636e\u5e93\u4e2d\u7684\u67d0\u4e9b\u4fe1\u606f\uff0c\u8fd9\u4e9b\u4fe1\u606f\u662f\u53e6\u4e00\u4e2a\u670d\u52a1\u5668\u9700\u8981\u6267\u884csql\u7684 [&hellip;]<\/p>\n","protected":false},"author":2,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[19],"tags":[37],"class_list":["post-12","post","type-post","status-publish","format-standard","hentry","category-mysql","tag-mysql"],"_links":{"self":[{"href":"http:\/\/ijz.me\/index.php?rest_route=\/wp\/v2\/posts\/12","targetHints":{"allow":["GET"]}}],"collection":[{"href":"http:\/\/ijz.me\/index.php?rest_route=\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/ijz.me\/index.php?rest_route=\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/ijz.me\/index.php?rest_route=\/wp\/v2\/users\/2"}],"replies":[{"embeddable":true,"href":"http:\/\/ijz.me\/index.php?rest_route=%2Fwp%2Fv2%2Fcomments&post=12"}],"version-history":[{"count":0,"href":"http:\/\/ijz.me\/index.php?rest_route=\/wp\/v2\/posts\/12\/revisions"}],"wp:attachment":[{"href":"http:\/\/ijz.me\/index.php?rest_route=%2Fwp%2Fv2%2Fmedia&parent=12"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/ijz.me\/index.php?rest_route=%2Fwp%2Fv2%2Fcategories&post=12"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/ijz.me\/index.php?rest_route=%2Fwp%2Fv2%2Ftags&post=12"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}