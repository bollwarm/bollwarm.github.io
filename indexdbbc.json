{"id":579,"date":"2014-07-07T17:11:40","date_gmt":"2014-07-07T09:11:40","guid":{"rendered":"http:\/\/ijz.me\/?p=579"},"modified":"2014-07-07T17:11:40","modified_gmt":"2014-07-07T09:11:40","slug":"rex%e5%ae%89%e8%a3%85","status":"publish","type":"post","link":"http:\/\/ijz.me\/?p=579","title":{"rendered":"rex\u5b89\u88c5"},"content":{"rendered":"<p>(R)?ex \u662f\u4e00\u4e2a\u4e0d\u9700\u8981\u5728\u53d7\u63a7\u4e3b\u673a\u8fd0\u884c\u5ba2\u6237\u7aef\u7684\u670d\u52a1\u5668\u6d41\u7a0b\u5de5\u5177\u3002\u5b83\u91c7\u7528 ssh \u65b9\u5f0f\u6765\u6267\u884c\u6307\u5b9a\u7684\u547d\u4ee4\u3002<\/p>\n<p>\u5f00\u59cb\u4f7f\u7528 (R)?ex \u5e76\u4e0d\u9700\u8981 Perl \u57fa\u7840\u3002(R)?ex \u63d0\u4f9b\u4e86\u7b80\u5355\u7684 DSL \u6765\u63cf\u8ff0\u4f60\u7684\u670d\u52a1\u5668\u3002\u751a\u81f3\uff0c\u4f60\u53ef\u4ee5\u5728\u4f60\u7684 shell \u811a\u672c\u91cc\u4f7f\u7528 (R)?ex\uff0c\u5b8c\u5168\u4e0d\u9700\u8981\u4f7f\u7528 perl\u3002<\/p>\n<p><!--more--><\/p>\n<p>\u5f53\u7136\uff0c\u5982\u679c\u4f60\u7a0d\u5fae\u61c2 <a href=\"\/howtos\/perl.html\">\u4e00\u70b9\u70b9 perl<\/a>\uff0c\u5c31\u66f4\u597d\u4e86\u3002<\/p>\n<p>\u6bcf\u4e2a (R)?ex \u9879\u76ee\u7684\u8d77\u59cb\u70b9\u90fd\u662f\u4e00\u4e2a\u53eb\u505a <i>Rexfile<\/i> \u7684\u6587\u4ef6\u3002\u4f60\u53ef\u4ee5\u7406\u89e3\u4ed6\u7c7b\u4f3c Makefile\u3002\u5728\u8fd9\u4e2a\u6587\u4ef6\u91cc\u4f60\u5b9a\u4e49\u5404\u79cd\u4efb\u52a1\u3002<\/p>\n<p>\u4e00\u4e2a <i>\u4efb\u52a1<\/i> \u662f\u76f8\u5173\u7684\u547d\u4ee4\u7684\u96c6\u5408\u3002\u6bd4\u5982\u5b89\u88c5\u4e00\u4e2a\u8f6f\u4ef6\u5305\uff0c\u4e0a\u4f20\u914d\u7f6e\u6587\u4ef6\uff0c\u7136\u540e\u542f\u52a8\u670d\u52a1\u3002\u4f60\u4e5f\u53ef\u4ee5\u5728\u4efb\u52a1\u4e2d\u8c03\u7528\u5176\u4ed6\u4efb\u52a1\uff0c\u6216\u8005\u521b\u5efa <a href=\"\/api\/Rex\/Transaction.pm.html\">rollback szenarios<\/a> \u6765\u56de\u6eda\u6267\u884c\u51fa\u9519\u7684\u4efb\u52a1\u3002<\/p>\n<h2>\u8981\u6c42<\/h2>\n<p>\u8fd0\u884c (R)?ex \u4e0d\u8981\u592a\u591a\u9884\u5907\u3002<\/p>\n<h3>\u4e00\u53f0\u4e2d\u5fc3\u673a\u5668<\/h3>\n<p>\u4f60\u4f1a\u4ece\u81ea\u5df1\u7684\u5de5\u4f5c\u7535\u8111\u6216\u4e00\u53f0\u5355\u72ec\u7684\u4e2d\u5fc3\u673a\u5668\u4e0a\u8fd0\u884c (R)?ex\u3002<\/p>\n<p>\u4f60\u7684\u4e2d\u5fc3 (R)?ex \u673a\u5668\u4e0a\u9700\u8981\u81f3\u5c11\u6709\u4e2a Perl 5.8\u3002\u6700\u597d\u662f\u80fd\u6709 Perl 5.10.1 \u4ee5\u4e0a\u7684\u7248\u672c\u3002<\/p>\n<p>\u673a\u5668\u4e0a\u8fd8\u9700\u8981\u5b89\u88c5\u4e00\u4e9b Perl \u6a21\u5757\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u81ea\u5df1\u53d1\u884c\u7248\u7684\u4ed3\u5e93\uff0c\u6216\u8005\u6211\u4eec\u7684 (R)?ex \u4ed3\u5e93\u6765\u5b89\u88c5\u8fd9\u4e9b\u6a21\u5757\uff1a<\/p>\n<ul>\n<li><a href=\"https:\/\/metacpan.org\/module\/Net::SSH2\">Net::SSH2<\/a><\/li>\n<li><a href=\"https:\/\/metacpan.org\/module\/YAML\">YAML<\/a><\/li>\n<li><a href=\"https:\/\/metacpan.org\/module\/LWP\">LWP<\/a><\/li>\n<li><a href=\"https:\/\/metacpan.org\/module\/DBI\">DBI<\/a>(\u5982\u679c\u4f60\u60f3\u8981\u6570\u636e\u5e93\u8bbf\u95ee\u7684\u8bdd)<\/li>\n<li><a href=\"https:\/\/metacpan.org\/module\/JSON::XS\">JSON::XS<\/a>(\u5982\u679c\u4f60\u60f3\u8981\u4f7f\u7528Jiffybox\u4e91\u4e3b\u673a\u7684\u8bdd)<\/li>\n<li><a href=\"https:\/\/metacpan.org\/module\/XML::Simple\">XML::Simple<\/a>(\u5982\u679c\u4f60\u60f3\u8981\u7528 FusionInventory \u6765\u91c7\u96c6\u7cfb\u7edf\u4fe1\u606f\uff0c\u4e9a\u9a6c\u900a\u4e91\u4ee5\u53ca\u4e00\u4e9b\u865a\u62df\u5316\u547d\u4ee4\u7684\u8bdd)<\/li>\n<li><a href=\"https:\/\/metacpan.org\/module\/String::Escape\">String::Escape<\/a> (\u5982\u679c\u4f60\u60f3\u5728 ini \u6587\u4ef6\u91cc\u5b9a\u4e49\u670d\u52a1\u5668\u7ec4\u7684\u8bdd)<\/li>\n<\/ul>\n<h3>\u53d7\u63a7\u7aef\u4e3b\u673a<\/h3>\n<p>\u53d7\u63a7\u7aef\u4e0a\u53ea\u9700\u8981\u4e00\u4e2a Perl5 \u89e3\u91ca\u5668\u548c\u4e00\u4e2a\u53ef\u7528\u7684 SSH \u8d26\u6237\u3002\u5982\u679c\u8981\u505a\u4e00\u4e9b\u7ba1\u7406\u4efb\u52a1\uff0c\u4f60\u53ef\u80fd\u9700\u8981 root \u6216\u8005 sudo \u6743\u9650\u3002<\/p>\n<p>&nbsp;<\/p>\n<p>1\u3001\u5b89\u88c5openssl<br \/>\nwget <a href=\"http:\/\/www.openssl.org\/source\/openssl-1.0.0l.tar.gz\">http:\/\/www.openssl.org\/source\/openssl-1.0.0l.tar.gz<\/a><\/p>\n<p>tar zxvf openssl-1.0.1c.tar.gz<\/p>\n<p>cd openssl-1.0.1c<\/p>\n<p>.\/config &#8211;prefix=\/home\/ylong\/Perl\/openssl<\/p>\n<p>make depend<\/p>\n<p>make<\/p>\n<p>make test<\/p>\n<p>make install<\/p>\n<p>centos 6.5 \u4e0b\u76f4\u63a5yum\u5b89\u88c5<\/p>\n<p>yum install openssl-devel<\/p>\n<p>2\u3001\u5b89\u88c5libssh<br \/>\n\u53ef\u4ee5\u5230<a href=\"http:\/\/www.libssh2.org\/download\/\">http:\/\/www.libssh2.org\/download\/<\/a>\u4e0b\u8f7d\u4efb\u9009\u62e9\u4e00\u4e2a\u7248\u672c\u7684libssh2<\/p>\n<p>wget http:\/\/www.libssh2.org\/download\/libssh2-1.3.0.tar.gz<\/p>\n<p>\u6267\u884c\u4ee5\u4e0b\u6b65\u9aa4\u8fdb\u884c\u5b89\u88c5\uff1a<\/p>\n<p>tar zxvf libssh2-1.2.9.tar.gz<\/p>\n<p>cd libssh2-1.2.9<\/p>\n<p>.\/configure &#8211;prefix=\/home\/ylong\/Perl\/libssh2 [&#8211;with-libssl-prefix=\/usr\/lib\/openssl]<br \/>\n\u5982\u679c\u662fx86_64\uff1a<\/p>\n<p>CFLAGS=&#8221;-O3 -fPIC&#8221; .\/configure &#8211;prefix=\/home\/ylong\/Perl\/libssh2 &#8211;with-libssl-prefix=\/home\/ylong\/Perl\/openssl\/lib<\/p>\n<p>make<\/p>\n<p>make install<\/p>\n<p>4\u3001\u5b89\u88c5net-ssh<\/p>\n<p>wget <a href=\"http:\/\/www.cpan.org\/authors\/id\/R\/RK\/RKITOVER\/Net-SSH2-0.53.tar.gz\">http:\/\/www.cpan.org\/authors\/id\/R\/RK\/RKITOVER\/Net-SSH2-0.53.tar.gz<\/a><br \/>\ncd Net-SSH2-0.53<br \/>\nperl Makefile.PL lib=\/home\/ylong\/Perl\/libssh2\/lib inc=\/home\/ylong\/Perl\/libssh2\/include<br \/>\nmake<\/p>\n<p>make test<\/p>\n<p>make intall<\/p>\n<p>4\u3001yum\u5b89\u88c5expat-devel<\/p>\n<p>yum install expat-devel<\/p>\n<p>\u5927\u529f\u544a\u6210&#8212;<\/p>\n<p>\u6700\u540e\u6267\u884c<br \/>\ncurl -L get.rexify.org | perl &#8211; &#8211;sudo -n Rex \u5373\u53ef\u5b8c\u6210rex\u7684\u5b89\u88c5\u3002<\/p>\n","protected":false},"excerpt":{"rendered":"<p>(R)?ex \u662f\u4e00\u4e2a\u4e0d\u9700\u8981\u5728\u53d7\u63a7\u4e3b\u673a\u8fd0\u884c\u5ba2\u6237\u7aef\u7684\u670d\u52a1\u5668\u6d41\u7a0b\u5de5\u5177\u3002\u5b83\u91c7\u7528 ssh \u65b9\u5f0f\u6765\u6267\u884c\u6307\u5b9a\u7684\u547d\u4ee4\u3002 \u5f00\u59cb\u4f7f [&hellip;]<\/p>\n","protected":false},"author":2,"featured_media":0,"comment_status":"closed","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[21,23],"tags":[40,44],"class_list":["post-579","post","type-post","status-publish","format-standard","hentry","category-perl","category-rex","tag-perl","tag-rex"],"_links":{"self":[{"href":"http:\/\/ijz.me\/index.php?rest_route=\/wp\/v2\/posts\/579","targetHints":{"allow":["GET"]}}],"collection":[{"href":"http:\/\/ijz.me\/index.php?rest_route=\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/ijz.me\/index.php?rest_route=\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/ijz.me\/index.php?rest_route=\/wp\/v2\/users\/2"}],"replies":[{"embeddable":true,"href":"http:\/\/ijz.me\/index.php?rest_route=%2Fwp%2Fv2%2Fcomments&post=579"}],"version-history":[{"count":0,"href":"http:\/\/ijz.me\/index.php?rest_route=\/wp\/v2\/posts\/579\/revisions"}],"wp:attachment":[{"href":"http:\/\/ijz.me\/index.php?rest_route=%2Fwp%2Fv2%2Fmedia&parent=579"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/ijz.me\/index.php?rest_route=%2Fwp%2Fv2%2Fcategories&post=579"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/ijz.me\/index.php?rest_route=%2Fwp%2Fv2%2Ftags&post=579"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}