{"id":740,"date":"2015-08-16T17:58:25","date_gmt":"2015-08-16T09:58:25","guid":{"rendered":"http:\/\/ijz.me\/?p=740"},"modified":"2015-08-16T17:58:25","modified_gmt":"2015-08-16T09:58:25","slug":"ip%e5%bd%92%e5%b1%9e%e5%9c%b0%e6%9f%a5%e8%af%a2%ef%bc%88%e8%b0%83%e7%94%a8%e6%b7%98%e5%ae%9d%e5%9c%b0%e5%9d%80%e5%ba%93%e6%8e%a5%e5%8f%a3%ef%bc%89","status":"publish","type":"post","link":"http:\/\/ijz.me\/?p=740","title":{"rendered":"ip\u5f52\u5c5e\u5730\u67e5\u8be2\uff08\u8c03\u7528\u6dd8\u5b9d\u5730\u5740\u5e93\u63a5\u53e3\uff09"},"content":{"rendered":"<p>\u6700\u8fd1\u56e0\u9700\u8981\uff0c\u9700\u8981\u5bf9ip\u5f52\u5c5e\u5730\u5740\u8fdb\u884c\u5206\u6790\uff0c\u7ecf\u8fc7\u665a\u4e0a\u67e5\u8be2\u53d1\u73b0\u6dd8\u5b9d\u7684\u5730\u5740\u5e93\u662f\u6700\u5168\u7684\uff0c\u800c\u4e14\u53d1\u73b0\u4ed6\u4eec\u63d0\u4f9b\u4e00\u4e2ajson\u63a5\u53e3\u3002<\/p>\n<p>git\u4e0b\u8f7d\u5730\u5740<br \/>\n<a title=\"ipwhere\" href=\"http:\/\/git.oschina.net\/ijz\/ipwhere\">http:\/\/git.oschina.net\/ijz\/ipwhere<\/a><br \/>\n\u6545\u5199\u4e86\u4e00\u4e2a\u501f\u53e3\u8c03\u7528\u63a5\u53e3\u8fdb\u884c\u67e5\u8be2\u3002\u4ee3\u7801\u4fdd\u5b58\u4e3aipwhere.pl\uff0c\u7136\u540e\u6267\u884c\uff1a<\/p>\n<p>.\/ipwhere.pl 8.8.8.8 8.8.8.6<br \/>\n\u9700\u8981\u5b89\u88c5 LWP::Simple \u548cJSON \u5e93\u3002\uff08cpan\u5b89\u88c5\u3002\uff09<\/p>\n<p><!--more--><\/p>\n<pre class=\"theme:github lang:perl decode:true \">#!\/bin\/env perl\n# .\/ipwhere.pl 8.8.8.8 8.8.8.6\nuse Data::Dumper;\nuse LWP::Simple;\nuse JSON;\nbinmode(STDOUT, ':encoding(utf8)');\n\nprint map{getTbeIParea()} validIP(@ARGV);\n\nsub validIP(){\nmy $re=qr(|[0-9]|[0-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5]);\nmy @ip=grep{\/^($re.){3}$re$\/} @_;\nreturn @ip;\n}\n\nsub getTbeIParea()\n{\nmy $url=qq(http:\/\/ip.taobao.com\/service\/getIpInfo.php?ip=$_);\nmy $code = get($url);\nmy $json = new JSON;\nmy $obj = $json-&gt;decode($code);\nmy $ipArea=\"$obj-&gt;{data}-&gt;{ip}:$obj-&gt;{data}-&gt;{country},$obj-&gt;{data}-&gt;{region},$obj-&gt;{data}-&gt;{city},$obj-&gt;{data}-&gt;{isp}n\";\nreturn $ipArea;\n}\n\n<\/pre>\n","protected":false},"excerpt":{"rendered":"<p>\u6700\u8fd1\u56e0\u9700\u8981\uff0c\u9700\u8981\u5bf9ip\u5f52\u5c5e\u5730\u5740\u8fdb\u884c\u5206\u6790\uff0c\u7ecf\u8fc7\u665a\u4e0a\u67e5\u8be2\u53d1\u73b0\u6dd8\u5b9d\u7684\u5730\u5740\u5e93\u662f\u6700\u5168\u7684\uff0c\u800c\u4e14\u53d1\u73b0\u4ed6\u4eec\u63d0\u4f9b\u4e00\u4e2ajson\u63a5\u53e3 [&hellip;]<\/p>\n","protected":false},"author":2,"featured_media":0,"comment_status":"open","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[21],"tags":[40],"class_list":["post-740","post","type-post","status-publish","format-standard","hentry","category-perl","tag-perl"],"_links":{"self":[{"href":"http:\/\/ijz.me\/index.php?rest_route=\/wp\/v2\/posts\/740","targetHints":{"allow":["GET"]}}],"collection":[{"href":"http:\/\/ijz.me\/index.php?rest_route=\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/ijz.me\/index.php?rest_route=\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/ijz.me\/index.php?rest_route=\/wp\/v2\/users\/2"}],"replies":[{"embeddable":true,"href":"http:\/\/ijz.me\/index.php?rest_route=%2Fwp%2Fv2%2Fcomments&post=740"}],"version-history":[{"count":0,"href":"http:\/\/ijz.me\/index.php?rest_route=\/wp\/v2\/posts\/740\/revisions"}],"wp:attachment":[{"href":"http:\/\/ijz.me\/index.php?rest_route=%2Fwp%2Fv2%2Fmedia&parent=740"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/ijz.me\/index.php?rest_route=%2Fwp%2Fv2%2Fcategories&post=740"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/ijz.me\/index.php?rest_route=%2Fwp%2Fv2%2Ftags&post=740"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}