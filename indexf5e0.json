{"id":619,"date":"2014-07-17T10:27:12","date_gmt":"2014-07-17T02:27:12","guid":{"rendered":"http:\/\/ijz.me\/?p=619"},"modified":"2014-07-17T10:27:12","modified_gmt":"2014-07-17T02:27:12","slug":"iptables%e5%9f%ba%e7%a1%80%e7%9f%a5%e8%af%86%e8%af%a6%e8%a7%a3zz","status":"publish","type":"post","link":"http:\/\/ijz.me\/?p=619","title":{"rendered":"iptables\u57fa\u7840\u77e5\u8bc6\u8be6\u89e3\/zz\/"},"content":{"rendered":"<p>&nbsp;<\/p>\n<p>iptables\u9632\u706b\u5899\u53ef\u4ee5\u7528\u4e8e\u521b\u5efa\u8fc7\u6ee4(filter)\u4e0eNAT\u89c4\u5219\u3002\u6240\u6709Linux\u53d1\u884c\u7248\u90fd\u80fd\u4f7f\u7528iptables\uff0c\u56e0\u6b64\u7406\u89e3\u5982\u4f55\u914d\u7f6eiptables\u5c06\u4f1a\u5e2e\u52a9\u4f60\u66f4\u6709\u6548\u5730\u7ba1\u7406Linux\u9632\u706b\u5899\u3002\u5982\u679c\u4f60\u662f\u7b2c\u4e00\u6b21\u63a5\u89e6iptables\uff0c\u4f60\u4f1a\u89c9\u5f97\u5b83\u5f88\u590d\u6742\uff0c\u4f46\u662f\u4e00\u65e6\u4f60\u7406\u89e3iptables\u7684\u5de5\u4f5c\u539f\u7406\uff0c\u4f60\u4f1a\u53d1\u73b0\u5176\u5b9e\u5b83\u5f88\u7b80\u5355\u3002<\/p>\n<p><!--more--><\/p>\n<p>\u9996\u5148\u4ecb\u7ecdiptables\u7684\u7ed3\u6784\uff1aiptables -&gt; Tables -&gt; Chains -&gt; Rules. \u7b80\u5355\u5730\u8bb2\uff0ctables\u7531chains\u7ec4\u6210\uff0c\u800cchains\u53c8\u7531rules\u7ec4\u6210\u3002\u5982\u4e0b\u56fe\u6240\u793a\u3002<\/p>\n<p><a href=\"http:\/\/ijz.me\/wp-content\/uploads\/2014\/07\/image001.png\"><img loading=\"lazy\" decoding=\"async\" class=\"size-full wp-image-620 aligncenter\" src=\"http:\/\/ijz.me\/wp-content\/uploads\/2014\/07\/image001.png\" alt=\"image001\" width=\"540\" height=\"400\" \/><\/a><\/p>\n<p style=\"text-align: center;\">\u56fe: IPTables Table, Chain, and Rule Structure<\/p>\n<p><strong>\u4e00\u3001iptables\u7684\u8868\u4e0e\u94fe<\/strong><\/p>\n<p>iptables\u5177\u6709Filter, NAT, Mangle, Raw\u56db\u79cd\u5185\u5efa\u8868\uff1a<\/p>\n<p><strong>1. Filter<\/strong><strong>\u8868<\/strong><\/p>\n<p>Filter\u8868\u793aiptables\u7684\u9ed8\u8ba4\u8868\uff0c\u56e0\u6b64\u5982\u679c\u4f60\u6ca1\u6709\u81ea\u5b9a\u4e49\u8868\uff0c\u90a3\u4e48\u5c31\u9ed8\u8ba4\u4f7f\u7528filter\u8868\uff0c\u5b83\u5177\u6709\u4ee5\u4e0b\u4e09\u79cd\u5185\u5efa\u94fe\uff1a<\/p>\n<ul>\n<li><strong>INPUT<\/strong><strong>\u94fe<\/strong> \u2013 \u5904\u7406\u6765\u81ea\u5916\u90e8\u7684\u6570\u636e\u3002<\/li>\n<li><strong>OUTPUT<\/strong><strong>\u94fe<\/strong> \u2013 \u5904\u7406\u5411\u5916\u53d1\u9001\u7684\u6570\u636e\u3002<\/li>\n<li><strong>FORWARD<\/strong><strong>\u94fe<\/strong> \u2013 \u5c06\u6570\u636e\u8f6c\u53d1\u5230\u672c\u673a\u7684\u5176\u4ed6\u7f51\u5361\u8bbe\u5907\u4e0a\u3002<\/li>\n<\/ul>\n<p><strong>2. NAT<\/strong><strong>\u8868<\/strong><\/p>\n<p>NAT\u8868\u6709\u4e09\u79cd\u5185\u5efa\u94fe\uff1a<\/p>\n<ul>\n<li><strong>PREROUTING<\/strong><strong>\u94fe<\/strong> \u2013 \u5904\u7406\u521a\u5230\u8fbe\u672c\u673a\u5e76\u5728\u8def\u7531\u8f6c\u53d1\u524d\u7684\u6570\u636e\u5305\u3002\u5b83\u4f1a\u8f6c\u6362\u6570\u636e\u5305\u4e2d\u7684\u76ee\u6807IP\u5730\u5740\uff08destination ip address\uff09\uff0c\u901a\u5e38\u7528\u4e8eDNAT(destination NAT)\u3002<\/li>\n<li><strong>POSTROUTING<\/strong><strong>\u94fe<\/strong> \u2013 \u5904\u7406\u5373\u5c06\u79bb\u5f00\u672c\u673a\u7684\u6570\u636e\u5305\u3002\u5b83\u4f1a\u8f6c\u6362\u6570\u636e\u5305\u4e2d\u7684\u6e90IP\u5730\u5740\uff08source ip address\uff09\uff0c\u901a\u5e38\u7528\u4e8eSNAT\uff08source NAT\uff09\u3002<\/li>\n<li><strong>OUTPUT<\/strong><strong>\u94fe<\/strong> \u2013 \u5904\u7406\u672c\u673a\u4ea7\u751f\u7684\u6570\u636e\u5305\u3002<\/li>\n<\/ul>\n<p><strong>3. Mangle<\/strong><strong>\u8868<\/strong><\/p>\n<p>Mangle\u8868\u7528\u4e8e\u6307\u5b9a\u5982\u4f55\u5904\u7406\u6570\u636e\u5305\u3002\u5b83\u80fd\u6539\u53d8TCP\u5934\u4e2d\u7684QoS\u4f4d\u3002Mangle\u8868\u5177\u67095\u4e2a\u5185\u5efa\u94fe\uff1a<\/p>\n<ul>\n<li>PREROUTING<\/li>\n<li>OUTPUT<\/li>\n<li>FORWARD<\/li>\n<li>INPUT<\/li>\n<li>POSTROUTING<\/li>\n<\/ul>\n<p><strong>4. Raw<\/strong><strong>\u8868<\/strong><\/p>\n<p>Raw\u8868\u7528\u4e8e\u5904\u7406\u5f02\u5e38\uff0c\u5b83\u5177\u67092\u4e2a\u5185\u5efa\u94fe\uff1a<\/p>\n<ul>\n<li>PREROUTING chain<\/li>\n<li>OUTPUT chain<\/li>\n<\/ul>\n<ol start=\"5\">\n<li><strong>\u5c0f\u7ed3<\/strong><\/li>\n<\/ol>\n<p>\u4e0b\u56fe\u5c55\u793a\u4e86iptables\u7684\u4e09\u4e2a\u5185\u5efa\u8868\uff1a<\/p>\n<p style=\"text-align: center;\"><a href=\"http:\/\/ijz.me\/wp-content\/uploads\/2014\/07\/image003.png\"><img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-full wp-image-622\" src=\"http:\/\/ijz.me\/wp-content\/uploads\/2014\/07\/image003.png\" alt=\"image003\" width=\"540\" height=\"279\" \/><\/a><\/p>\n<p style=\"text-align: center;\">\u56fe: IPTables \u5185\u5efa\u8868<\/p>\n<p><strong>\u4e8c\u3001IPTABLES \u89c4\u5219(Rules)<\/strong><\/p>\n<p>\u7262\u8bb0\u4ee5\u4e0b\u4e09\u70b9\u5f0f\u7406\u89e3iptables\u89c4\u5219\u7684\u5173\u952e\uff1a<\/p>\n<ul>\n<li>Rules\u5305\u62ec\u4e00\u4e2a\u6761\u4ef6\u548c\u4e00\u4e2a\u76ee\u6807(target)<\/li>\n<li>\u5982\u679c\u6ee1\u8db3\u6761\u4ef6\uff0c\u5c31\u6267\u884c\u76ee\u6807(target)\u4e2d\u7684\u89c4\u5219\u6216\u8005\u7279\u5b9a\u503c\u3002<\/li>\n<li>\u5982\u679c\u4e0d\u6ee1\u8db3\u6761\u4ef6\uff0c\u5c31\u5224\u65ad\u4e0b\u4e00\u6761Rules\u3002<\/li>\n<\/ul>\n<p><strong>\u76ee\u6807\u503c\uff08Target Values\uff09<\/strong><\/p>\n<p>\u4e0b\u9762\u662f\u4f60\u53ef\u4ee5\u5728target\u91cc\u6307\u5b9a\u7684\u7279\u6b8a\u503c\uff1a<\/p>\n<ul>\n<li><strong>ACCEPT<\/strong>\u2013 \u5141\u8bb8\u9632\u706b\u5899\u63a5\u6536\u6570\u636e\u5305<\/li>\n<li><strong>DROP<\/strong>\u2013 \u9632\u706b\u5899\u4e22\u5f03\u5305<\/li>\n<li><strong>QUEUE<\/strong>\u2013 \u9632\u706b\u5899\u5c06\u6570\u636e\u5305\u79fb\u4ea4\u5230\u7528\u6237\u7a7a\u95f4<\/li>\n<li><strong>RETURN<\/strong>\u2013 \u9632\u706b\u5899\u505c\u6b62\u6267\u884c\u5f53\u524d\u94fe\u4e2d\u7684\u540e\u7eedRules\uff0c\u5e76\u8fd4\u56de\u5230\u8c03\u7528\u94fe(the calling chain)\u4e2d\u3002<\/li>\n<\/ul>\n<p>\u5982\u679c\u4f60\u6267\u884ciptables \u2013list\u4f60\u5c06\u770b\u5230\u9632\u706b\u5899\u4e0a\u7684\u53ef\u7528\u89c4\u5219\u3002\u4e0b\u4f8b\u8bf4\u660e\u5f53\u524d\u7cfb\u7edf\u6ca1\u6709\u5b9a\u4e49\u9632\u706b\u5899\uff0c\u4f60\u53ef\u4ee5\u770b\u5230\uff0c\u5b83\u663e\u793a\u4e86\u9ed8\u8ba4\u7684filter\u8868\uff0c\u4ee5\u53ca\u8868\u5185\u9ed8\u8ba4\u7684input\u94fe, forward\u94fe, output\u94fe\u3002<\/p>\n<p># iptables -t filter \u2013list Chain INPUT (policy ACCEPT) target prot opt source destination<\/p>\n<p>Chain FORWARD (policy ACCEPT) target prot opt source destination<\/p>\n<p>Chain OUTPUT (policy ACCEPT) target prot opt source destination<\/p>\n<p>\u67e5\u770bmangle\u8868\uff1a<\/p>\n<p># iptables -t mangle \u2013list<\/p>\n<p>\u67e5\u770bNAT\u8868\uff1a<\/p>\n<p># iptables -t nat \u2013list<\/p>\n<p>\u67e5\u770bRAW\u8868\uff1a<\/p>\n<p># iptables -t raw \u2013list<\/p>\n<p>!\u6ce8\u610f\uff1a\u5982\u679c\u4e0d\u6307\u5b9a<strong>-t<\/strong>\u9009\u9879\uff0c\u5c31\u53ea\u4f1a\u663e\u793a\u9ed8\u8ba4\u7684<strong>filter<\/strong>\u8868\u3002\u56e0\u6b64\uff0c\u4ee5\u4e0b\u4e24\u79cd\u547d\u4ee4\u5f62\u5f0f\u662f\u4e00\u4e2a\u610f\u601d\uff1a<\/p>\n<p># iptables -t filter \u2013list (or) # iptables \u2013list<\/p>\n<p>\u4ee5\u4e0b\u4f8b\u5b50\u8868\u660e\u5728filter\u8868\u7684input\u94fe, forward\u94fe, output\u94fe\u4e2d\u5b58\u5728\u89c4\u5219\uff1a<\/p>\n<p># iptables \u2013list Chain INPUT (policy ACCEPT) num target prot opt source destination 1 RH-Firewall-1-INPUT all \u2014 0.0.0.0\/0 0.0.0.0\/0<\/p>\n<p>Chain FORWARD (policy ACCEPT) num target prot opt source destination 1 RH-Firewall-1-INPUT all \u2013 0.0.0.0\/0 0.0.0.0\/0<\/p>\n<p>Chain OUTPUT (policy ACCEPT) num target prot opt source destination<\/p>\n<p>Chain RH-Firewall-1-INPUT (2 references) num target prot opt source destination 1 ACCEPT all \u2013 0.0.0.0\/0 0.0.0.0\/0 2 ACCEPT icmp \u2013 0.0.0.0\/0 0.0.0.0\/0 icmp type 255 3 ACCEPT esp \u2013 0.0.0.0\/0 0.0.0.0\/0 4 ACCEPT ah \u2013 0.0.0.0\/0 0.0.0.0\/0 5 ACCEPT udp \u2013 0.0.0.0\/0 224.0.0.251 udp dpt:5353 6 ACCEPT udp \u2013 0.0.0.0\/0 0.0.0.0\/0 udp dpt:631 7 ACCEPT tcp \u2013 0.0.0.0\/0 0.0.0.0\/0 tcp dpt:631 8 ACCEPT all \u2013 0.0.0.0\/0 0.0.0.0\/0 state RELATED,ESTABLISHED 9 ACCEPT tcp \u2013 0.0.0.0\/0 0.0.0.0\/0 state NEW tcp dpt:22 10 REJECT all \u2013 0.0.0.0\/0 0.0.0.0\/0 reject-with icmp-host-prohibited<\/p>\n<p>\u4ee5\u4e0a\u8f93\u51fa\u5305\u542b\u4e0b\u5217\u5b57\u6bb5\uff1a<\/p>\n<ul>\n<li>num \u2013 \u6307\u5b9a\u94fe\u4e2d\u7684\u89c4\u5219\u7f16\u53f7 target \u2013 \u524d\u9762\u63d0\u5230\u7684target\u7684\u7279\u6b8a\u503c prot \u2013 \u534f\u8bae\uff1atcp, udp, icmp\u7b49 source \u2013 \u6570\u636e\u5305\u7684\u6e90IP\u5730\u5740 destination \u2013 \u6570\u636e\u5305\u7684\u76ee\u6807IP\u5730\u5740<\/li>\n<\/ul>\n<p><strong>\u4e09\u3001\u6e05\u7a7a\u6240\u6709iptables\u89c4\u5219<\/strong><\/p>\n<p>\u5728\u914d\u7f6eiptables\u4e4b\u524d\uff0c\u4f60\u901a\u5e38\u9700\u8981\u7528iptables \u2013list\u547d\u4ee4\u6216\u8005iptables-save\u547d\u4ee4\u67e5\u770b\u6709\u65e0\u73b0\u5b58\u89c4\u5219\uff0c\u56e0\u4e3a\u6709\u65f6\u9700\u8981\u5220\u9664\u73b0\u6709\u7684iptables\u89c4\u5219\uff1a<\/p>\n<p>iptables \u2013flush \u6216\u8005 iptables -F<\/p>\n<p>\u8fd9\u4e24\u6761\u547d\u4ee4\u662f\u7b49\u6548\u7684\u3002\u4f46\u662f\u5e76\u975e\u6267\u884c\u540e\u5c31\u4e07\u4e8b\u5927\u5409\u4e86\u3002\u4f60\u4ecd\u7136\u9700\u8981\u68c0\u67e5\u89c4\u5219\u662f\u4e0d\u662f\u771f\u7684\u6e05\u7a7a\u4e86\uff0c\u56e0\u4e3a\u6709\u7684linux\u53d1\u884c\u7248\u4e0a\u8fd9\u4e2a\u547d\u4ee4\u4e0d\u4f1a\u6e05\u9664NAT\u8868\u4e2d\u7684\u89c4\u5219\uff0c\u6b64\u65f6\u53ea\u80fd\u624b\u52a8\u6e05\u9664\uff1a<\/p>\n<p>iptables -t NAT -F<\/p>\n<p><strong>\u56db\u3001\u6c38\u4e45\u751f\u6548<\/strong><\/p>\n<p>\u5f53\u4f60\u5220\u9664\u3001\u6dfb\u52a0\u89c4\u5219\u540e\uff0c\u8fd9\u4e9b\u66f4\u6539\u5e76\u4e0d\u80fd\u6c38\u4e45\u751f\u6548\uff0c\u8fd9\u4e9b\u89c4\u5219\u5f88\u6709\u53ef\u80fd\u5728\u7cfb\u7edf\u91cd\u542f\u540e\u6062\u590d\u539f\u6837\u3002\u4e3a\u4e86\u8ba9\u914d\u7f6e\u6c38\u4e45\u751f\u6548\uff0c\u6839\u636e\u5e73\u53f0\u7684\u4e0d\u540c\uff0c\u5177\u4f53\u64cd\u4f5c\u4e5f\u4e0d\u540c\u3002\u4e0b\u9762\u8fdb\u884c\u7b80\u5355\u4ecb\u7ecd\uff1a<\/p>\n<p><strong>1.Ubuntu<\/strong><\/p>\n<p>\u9996\u5148\uff0c\u4fdd\u5b58\u73b0\u6709\u7684\u89c4\u5219\uff1a<\/p>\n<p>iptables-save &gt; \/etc\/iptables.rules<\/p>\n<p>\u7136\u540e\u65b0\u5efa\u4e00\u4e2abash\u811a\u672c\uff0c\u5e76\u4fdd\u5b58\u5230<em>\/etc\/network\/if-pre-up.d\/<\/em>\u76ee\u5f55\u4e0b\uff1a<\/p>\n<p>#!\/bin\/bash iptables-restore &lt; \/etc\/iptables.rules<\/p>\n<p>\u8fd9\u6837\uff0c\u6bcf\u6b21\u7cfb\u7edf\u91cd\u542f\u540eiptables\u89c4\u5219\u90fd\u4f1a\u88ab\u81ea\u52a8\u52a0\u8f7d\u3002<\/p>\n<p><strong>\uff01\u6ce8\u610f\uff1a\u4e0d\u8981\u5c1d\u8bd5\u5728.bashrc\u6216\u8005.profile\u4e2d\u6267\u884c\u4ee5\u4e0a\u547d\u4ee4\uff0c\u56e0\u4e3a\u7528\u6237\u901a\u5e38\u4e0d\u662froot\uff0c\u800c\u4e14\u8fd9\u53ea\u80fd\u5728\u767b\u5f55\u65f6\u52a0\u8f7diptables\u89c4\u5219\u3002<\/strong><\/p>\n<p><strong>2.CentOS, RedHat<\/strong><\/p>\n<p># \u4fdd\u5b58iptables\u89c4\u5219 service iptables save<\/p>\n<p># \u91cd\u542fiptables\u670d\u52a1 service iptables stop service iptables start<\/p>\n<p>\u67e5\u770b\u5f53\u524d\u89c4\u5219\uff1a<\/p>\n<p>cat \/etc\/sysconfig\/iptables<\/p>\n<p><strong>\u4e94\u3001\u8ffd\u52a0iptables\u89c4\u5219<\/strong><\/p>\n<p>\u53ef\u4ee5\u4f7f\u7528iptables -A\u547d\u4ee4\u8ffd\u52a0\u65b0\u89c4\u5219\uff0c\u5176\u4e2d<strong>-A<\/strong>\u8868\u793a<strong>Append<\/strong>\u3002\u56e0\u6b64\uff0c<strong>\u65b0\u7684\u89c4\u5219\u5c06\u8ffd\u52a0\u5230\u94fe\u5c3e\u3002<\/strong><\/p>\n<p>\u4e00\u822c\u800c\u8a00\uff0c\u6700\u540e\u4e00\u6761\u89c4\u5219\u7528\u4e8e\u4e22\u5f03(DROP)\u6240\u6709\u6570\u636e\u5305\u3002\u5982\u679c\u4f60\u5df2\u7ecf\u6709\u8fd9\u6837\u7684\u89c4\u5219\u4e86\uff0c\u5e76\u4e14\u4f7f\u7528<strong>-A<\/strong>\u53c2\u6570\u6dfb\u52a0\u65b0\u89c4\u5219\uff0c\u90a3\u4e48\u5c31\u662f\u65e0\u7528\u529f\u3002<\/p>\n<ol>\n<li><strong>\u8bed\u6cd5<\/strong><\/li>\n<\/ol>\n<p>iptables -A chain firewall-rule<\/p>\n<ul>\n<li>-A chain \u2013 \u6307\u5b9a\u8981\u8ffd\u52a0\u89c4\u5219\u7684\u94fe<\/li>\n<li>firewall-rule \u2013 \u5177\u4f53\u7684\u89c4\u5219\u53c2\u6570<\/li>\n<\/ul>\n<ol start=\"2\">\n<li><strong>\u63cf\u8ff0\u89c4\u5219\u7684\u57fa\u672c\u53c2\u6570<\/strong><\/li>\n<\/ol>\n<p>\u4ee5\u4e0b\u8fd9\u4e9b\u89c4\u5219\u53c2\u6570\u7528\u4e8e\u63cf\u8ff0\u6570\u636e\u5305\u7684\u534f\u8bae\u3001\u6e90\u5730\u5740\u3001\u76ee\u7684\u5730\u5740\u3001\u5141\u8bb8\u7ecf\u8fc7\u7684\u7f51\u7edc\u63a5\u53e3\uff0c\u4ee5\u53ca\u5982\u4f55\u5904\u7406\u8fd9\u4e9b\u6570\u636e\u5305\u3002\u8fd9\u4e9b\u63cf\u8ff0\u662f\u5bf9\u89c4\u5219\u7684\u57fa\u672c\u63cf\u8ff0\u3002<\/p>\n<p><strong>-p <\/strong><strong>\u534f\u8bae\uff08protocol\uff09<\/strong><\/p>\n<ul>\n<li>\u6307\u5b9a\u89c4\u5219\u7684\u534f\u8bae\uff0c\u5982tcp, udp, icmp\u7b49\uff0c\u53ef\u4ee5\u4f7f\u7528<strong>all<\/strong>\u6765\u6307\u5b9a\u6240\u6709\u534f\u8bae\u3002<\/li>\n<li>\u5982\u679c\u4e0d\u6307\u5b9a<strong>-p<\/strong>\u53c2\u6570\uff0c\u5219\u9ed8\u8ba4\u662f<strong>all<\/strong>\u503c\u3002\u8fd9\u5e76\u4e0d\u660e\u667a\uff0c\u8bf7\u603b\u662f\u660e\u786e\u6307\u5b9a\u534f\u8bae\u540d\u79f0\u3002<\/li>\n<li>\u53ef\u4ee5\u4f7f\u7528\u534f\u8bae\u540d(\u5982tcp)\uff0c\u6216\u8005\u662f\u534f\u8bae\u503c\uff08\u6bd4\u59826\u4ee3\u8868tcp\uff09\u6765\u6307\u5b9a\u534f\u8bae\u3002\u6620\u5c04\u5173\u7cfb\u8bf7\u67e5\u770b<em>\/etc\/protocols<\/em><\/li>\n<li>\u8fd8\u53ef\u4ee5\u4f7f\u7528<strong>\u2013protocol<\/strong>\u53c2\u6570\u4ee3\u66ff<strong>-p<\/strong>\u53c2\u6570<\/li>\n<\/ul>\n<p><strong>-s <\/strong><strong>\u6e90\u5730\u5740\uff08source\uff09<\/strong><\/p>\n<ul>\n<li>\u6307\u5b9a\u6570\u636e\u5305\u7684\u6e90\u5730\u5740<\/li>\n<li>\u53c2\u6570\u53ef\u4ee5\u4f7fIP\u5730\u5740\u3001\u7f51\u7edc\u5730\u5740\u3001\u4e3b\u673a\u540d<\/li>\n<li>\u4f8b\u5982\uff1a-s 192.168.1.101\u6307\u5b9aIP\u5730\u5740<\/li>\n<li>\u4f8b\u5982\uff1a-s 192.168.1.10\/24\u6307\u5b9a\u7f51\u7edc\u5730\u5740<\/li>\n<li>\u5982\u679c\u4e0d\u6307\u5b9a-s\u53c2\u6570\uff0c\u5c31\u4ee3\u8868\u6240\u6709\u5730\u5740<\/li>\n<li>\u8fd8\u53ef\u4ee5\u4f7f\u7528<strong>\u2013src<\/strong>\u6216\u8005<strong>\u2013source<\/strong><\/li>\n<\/ul>\n<p><strong>-d <\/strong><strong>\u76ee\u7684\u5730\u5740\uff08destination\uff09<\/strong><\/p>\n<ul>\n<li>\u6307\u5b9a\u76ee\u7684\u5730\u5740<\/li>\n<li>\u53c2\u6570\u548c<strong>-s<\/strong>\u76f8\u540c<\/li>\n<li>\u8fd8\u53ef\u4ee5\u4f7f\u7528<strong>\u2013dst<\/strong>\u6216\u8005<strong>\u2013destination<\/strong><\/li>\n<\/ul>\n<p><strong>-j <\/strong><strong>\u6267\u884c\u76ee\u6807\uff08jump to target\uff09<\/strong><\/p>\n<ul>\n<li><strong>-j<\/strong>\u4ee3\u8868\u201djump to target\u201d<\/li>\n<li><strong>-j<\/strong>\u6307\u5b9a\u4e86\u5f53\u4e0e\u89c4\u5219(Rule)\u5339\u914d\u65f6\u5982\u4f55\u5904\u7406\u6570\u636e\u5305<\/li>\n<li>\u53ef\u80fd\u7684\u503c\u662fACCEPT, DROP, QUEUE, RETURN<\/li>\n<li>\u8fd8\u53ef\u4ee5\u6307\u5b9a\u5176\u4ed6\u94fe\uff08Chain\uff09\u4f5c\u4e3a\u76ee\u6807<\/li>\n<\/ul>\n<p><strong>-i <\/strong><strong>\u8f93\u5165\u63a5\u53e3\uff08input interface\uff09<\/strong><\/p>\n<ul>\n<li><strong>-i<\/strong>\u4ee3\u8868\u8f93\u5165\u63a5\u53e3(input interface)<\/li>\n<li><strong>-i<\/strong>\u6307\u5b9a\u4e86\u8981\u5904\u7406\u6765\u81ea\u54ea\u4e2a\u63a5\u53e3\u7684\u6570\u636e\u5305<\/li>\n<li>\u8fd9\u4e9b\u6570\u636e\u5305\u5373\u5c06\u8fdb\u5165INPUT, FORWARD, PREROUTE\u94fe<\/li>\n<li>\u4f8b\u5982\uff1a<strong>-i eth0<\/strong>\u6307\u5b9a\u4e86\u8981\u5904\u7406\u7ecf\u7531eth0\u8fdb\u5165\u7684\u6570\u636e\u5305<\/li>\n<li>\u5982\u679c\u4e0d\u6307\u5b9a<strong>-i<\/strong>\u53c2\u6570\uff0c\u90a3\u4e48\u5c06\u5904\u7406\u8fdb\u5165\u6240\u6709\u63a5\u53e3\u7684\u6570\u636e\u5305<\/li>\n<li>\u5982\u679c\u51fa\u73b0<strong>!<\/strong> -i eth0\uff0c\u90a3\u4e48\u5c06\u5904\u7406\u6240\u6709\u7ecf\u7531<strong>eth0\u4ee5\u5916\u7684\u63a5\u53e3<\/strong>\u8fdb\u5165\u7684\u6570\u636e\u5305<\/li>\n<li>\u5982\u679c\u51fa\u73b0-i eth<strong>+<\/strong>\uff0c\u90a3\u4e48\u5c06\u5904\u7406\u6240\u6709\u7ecf\u7531<strong>eth\u5f00\u5934\u7684\u63a5\u53e3<\/strong>\u8fdb\u5165\u7684\u6570\u636e\u5305<\/li>\n<li>\u8fd8\u53ef\u4ee5\u4f7f\u7528<strong>\u2013in-interface<\/strong>\u53c2\u6570<\/li>\n<\/ul>\n<p><strong>-o <\/strong><strong>\u8f93\u51fa\uff08out interface\uff09<\/strong><\/p>\n<ul>\n<li><strong>-o<\/strong>\u4ee3\u8868\u201doutput interface\u201d<\/li>\n<li><strong>-o<\/strong>\u6307\u5b9a\u4e86\u6570\u636e\u5305\u7531\u54ea\u4e2a\u63a5\u53e3\u8f93\u51fa<\/li>\n<li>\u8fd9\u4e9b\u6570\u636e\u5305\u5373\u5c06\u8fdb\u5165FORWARD, OUTPUT, POSTROUTING\u94fe<\/li>\n<li>\u5982\u679c\u4e0d\u6307\u5b9a<strong>-o<\/strong>\u9009\u9879\uff0c\u90a3\u4e48\u7cfb\u7edf\u4e0a\u7684\u6240\u6709\u63a5\u53e3\u90fd\u53ef\u4ee5\u4f5c\u4e3a\u8f93\u51fa\u63a5\u53e3<\/li>\n<li>\u5982\u679c\u51fa\u73b0<strong>!<\/strong> -o eth0\uff0c\u90a3\u4e48\u5c06\u4ece<strong>eth0\u4ee5\u5916\u7684\u63a5\u53e3<\/strong>\u8f93\u51fa<\/li>\n<li>\u5982\u679c\u51fa\u73b0-i eth<strong>+<\/strong>\uff0c\u90a3\u4e48\u5c06\u4ec5\u4ece<strong>eth\u5f00\u5934\u7684\u63a5\u53e3<\/strong>\u8f93\u51fa<\/li>\n<li>\u8fd8\u53ef\u4ee5\u4f7f\u7528<strong>\u2013out-interface<\/strong>\u53c2\u6570<\/li>\n<\/ul>\n<ol start=\"3\">\n<li><strong>\u63cf\u8ff0\u89c4\u5219\u7684\u6269\u5c55\u53c2\u6570<\/strong><\/li>\n<\/ol>\n<p>\u5bf9\u89c4\u5219\u6709\u4e86\u4e00\u4e2a\u57fa\u672c\u63cf\u8ff0\u4e4b\u540e\uff0c\u6709\u65f6\u5019\u6211\u4eec\u8fd8\u5e0c\u671b\u6307\u5b9a\u7aef\u53e3\u3001TCP\u6807\u5fd7\u3001ICMP\u7c7b\u578b\u7b49\u5185\u5bb9\u3002<\/p>\n<p><strong>\u2013sport \u6e90\u7aef\u53e3\uff08source port\uff09\u9488\u5bf9 -p tcp \u6216\u8005 -p udp<\/strong><\/p>\n<ul>\n<li>\u7f3a\u7701\u60c5\u51b5\u4e0b\uff0c\u5c06\u5339\u914d\u6240\u6709\u7aef\u53e3<\/li>\n<li>\u53ef\u4ee5\u6307\u5b9a\u7aef\u53e3\u53f7\u6216\u8005\u7aef\u53e3\u540d\u79f0\uff0c\u4f8b\u5982\u201d\u2013sport 22\u2033\u4e0e\u201d\u2013sport ssh\u201d\u3002<\/li>\n<li><em>\/etc\/services<\/em>\u6587\u4ef6\u63cf\u8ff0\u4e86\u4e0a\u8ff0\u6620\u5c04\u5173\u7cfb\u3002<\/li>\n<li>\u4ece\u6027\u80fd\u4e0a\u8bb2\uff0c\u4f7f\u7528\u7aef\u53e3\u53f7\u66f4\u597d<\/li>\n<li>\u4f7f\u7528\u5192\u53f7\u53ef\u4ee5\u5339\u914d\u7aef\u53e3\u8303\u56f4\uff0c\u5982\u201d\u2013sport 22:100\u2033<\/li>\n<li>\u8fd8\u53ef\u4ee5\u4f7f\u7528\u201d\u2013source-port\u201d<\/li>\n<\/ul>\n<p><strong>\u2013-dport \u76ee\u7684\u7aef\u53e3\uff08destination port\uff09\u9488\u5bf9-p tcp \u6216\u8005 -p udp<\/strong><\/p>\n<ul>\n<li>\u53c2\u6570\u548c\u2013sport\u7c7b\u4f3c<\/li>\n<li>\u8fd8\u53ef\u4ee5\u4f7f\u7528\u201d\u2013destination-port\u201d<\/li>\n<\/ul>\n<p><strong>&#8211;<\/strong><strong>\u2013tcp-flags TCP\u6807\u5fd7 \u9488\u5bf9-p tcp<\/strong><\/p>\n<ul>\n<li>\u53ef\u4ee5\u6307\u5b9a\u7531\u9017\u53f7\u5206\u9694\u7684\u591a\u4e2a\u53c2\u6570<\/li>\n<li>\u6709\u6548\u503c\u53ef\u4ee5\u662f\uff1aSYN, ACK, FIN, RST, URG, PSH<\/li>\n<li>\u53ef\u4ee5\u4f7f\u7528<strong>ALL<\/strong>\u6216\u8005<strong>NONE<\/strong><\/li>\n<\/ul>\n<p><strong>&#8211;<\/strong><strong>\u2013icmp-type ICMP\u7c7b\u578b \u9488\u5bf9-p icmp<\/strong><\/p>\n<ul>\n<li>\u2013icmp-type 0 \u8868\u793aEcho Reply<\/li>\n<li>\u2013icmp-type 8 \u8868\u793aEcho<\/li>\n<\/ul>\n<ol start=\"4\">\n<li><strong>\u8ffd\u52a0\u89c4\u5219\u7684\u5b8c\u6574\u5b9e\u4f8b\uff1a\u4ec5\u5141\u8bb8SSH\u670d\u52a1<\/strong><\/li>\n<\/ol>\n<p>\u672c\u4f8b\u5b9e\u73b0\u7684\u89c4\u5219\u5c06\u4ec5\u5141\u8bb8SSH\u6570\u636e\u5305\u901a\u8fc7\u672c\u5730\u8ba1\u7b97\u673a\uff0c\u5176\u4ed6\u4e00\u5207\u8fde\u63a5\uff08\u5305\u62ecping\uff09\u90fd\u5c06\u88ab\u62d2\u7edd\u3002<\/p>\n<p># 1.\u6e05\u7a7a\u6240\u6709iptables\u89c4\u5219 iptables -F<\/p>\n<p># 2.\u63a5\u6536\u76ee\u6807\u7aef\u53e3\u4e3a22\u7684\u6570\u636e\u5305 iptables -A INPUT -i eth0 -p tcp \u2013dport 22 -j ACCEPT<\/p>\n<p># 3.\u62d2\u7edd\u6240\u6709\u5176\u4ed6\u6570\u636e\u5305 iptables -A INPUT -j DROP<\/p>\n<p><strong>\u516d\u3001\u66f4\u6539\u9ed8\u8ba4\u7b56\u7565<\/strong><\/p>\n<p>\u4e0a\u4f8b\u7684\u4f8b\u5b50\u4ec5\u5bf9\u63a5\u6536\u7684\u6570\u636e\u5305\u8fc7\u6ee4\uff0c\u800c\u5bf9\u4e8e\u8981\u53d1\u9001\u51fa\u53bb\u7684\u6570\u636e\u5305\u5374\u6ca1\u6709\u4efb\u4f55\u9650\u5236\u3002\u672c\u8282\u4e3b\u8981\u4ecb\u7ecd\u5982\u4f55\u66f4\u6539\u94fe\u7b56\u7565\uff0c\u4ee5\u6539\u53d8\u94fe\u7684\u884c\u4e3a\u3002<\/p>\n<p><strong>1. <\/strong><strong>\u9ed8\u8ba4\u94fe\u7b56\u7565<\/strong><\/p>\n<p><strong>\/!<\/strong><strong>\u8b66\u544a<\/strong>\uff1a\u8bf7\u52ff\u5728\u8fdc\u7a0b\u8fde\u63a5\u7684\u670d\u52a1\u5668\u3001\u865a\u62df\u673a\u4e0a\u6d4b\u8bd5\uff01<\/p>\n<p>\u5f53\u6211\u4eec\u4f7f\u7528-L\u9009\u9879\u9a8c\u8bc1\u5f53\u524d\u89c4\u5219\u662f\u53d1\u73b0\uff0c\u6240\u6709\u7684\u94fe\u65c1\u8fb9\u90fd\u6709<strong>policy ACCEPT<\/strong>\u6807\u6ce8\uff0c\u8fd9\u8868\u660e\u5f53\u524d\u94fe\u7684\u9ed8\u8ba4\u7b56\u7565\u4e3aACCEPT\uff1a<\/p>\n<p># iptables -L Chain INPUT (policy ACCEPT) target prot opt source destination ACCEPT tcp \u2013 anywhere anywhere tcp dpt:ssh DROP all \u2013 anywhere anywhere<\/p>\n<p>Chain FORWARD (policy ACCEPT) target prot opt source destination<\/p>\n<p>Chain OUTPUT (policy ACCEPT) target prot opt source destination<\/p>\n<p>\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u6ca1\u6709\u660e\u786e\u6dfb\u52a0DROP\u89c4\u5219\uff0c\u90a3\u4e48\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5c06\u91c7\u7528ACCEPT\u7b56\u7565\u8fdb\u884c\u8fc7\u6ee4\u3002\u9664\u975e\uff1a<\/p>\n<p><strong>a)<\/strong><strong>\u4e3a\u4ee5\u4e0a\u4e09\u4e2a\u94fe\u5355\u72ec\u6dfb\u52a0DROP\u89c4\u5219\uff1a<\/strong><\/p>\n<p>iptables -A INPUT -j DROP iptables -A OUTPUT -j DROP iptables -A FORWARD -j DROP<\/p>\n<p><strong>b)<\/strong><strong>\u66f4\u6539\u9ed8\u8ba4\u7b56\u7565\uff1a<\/strong><\/p>\n<p>iptables -P INPUT DROP iptables -P OUTPUT DROP iptables -P FORWARD DROP<\/p>\n<p>\u7cdf\u7cd5\uff01\uff01\u5982\u679c\u4f60\u4e25\u683c\u6309\u7167\u4e0a\u4e00\u8282\u7684\u4f8b\u5b50\u914d\u7f6e\u4e86iptables\uff0c\u5e76\u4e14\u73b0\u5728\u4f7f\u7528\u7684\u662fSSH\u8fdb\u884c\u8fde\u63a5\u7684\uff0c\u90a3\u4e48\u4f1a\u8bdd\u6050\u6015\u5df2\u7ecf\u88ab\u8feb\u7ec8\u6b62\u4e86\uff01<\/p>\n<p>\u4e3a\u4ec0\u4e48\u5462\uff1f\u56e0\u4e3a\u6211\u4eec\u5df2\u7ecf\u628aOUTPUT\u94fe\u7b56\u7565\u66f4\u6539\u4e3aDROP\u4e86\u3002\u6b64\u65f6\u867d\u7136\u670d\u52a1\u5668\u80fd\u63a5\u6536\u6570\u636e\uff0c\u4f46\u662f\u65e0\u6cd5\u53d1\u9001\u6570\u636e\uff1a<\/p>\n<p># iptables -L Chain INPUT <strong>(policy DROP)<\/strong> target prot opt source destination ACCEPT tcp \u2013 anywhere anywhere tcp dpt:ssh DROP all \u2013 anywhere anywhere<\/p>\n<p>Chain FORWARD <strong>(policy DROP)<\/strong> target prot opt source destination<\/p>\n<p>Chain OUTPUT <strong>(policy DROP)<\/strong> target prot opt source destination<\/p>\n<p><strong>\u4e03\u3001\u914d\u7f6e\u5e94\u7528\u7a0b\u5e8f\u89c4\u5219<\/strong><\/p>\n<p>\u5c3d\u7ba15.4\u8282\u5df2\u7ecf\u4ecb\u7ecd\u4e86\u5982\u4f55\u521d\u6b65\u9650\u5236\u9664SSH\u4ee5\u5916\u7684\u5176\u4ed6\u8fde\u63a5\uff0c\u4f46\u662f\u90a3\u662f\u5728\u94fe\u9ed8\u8ba4\u7b56\u7565\u4e3aACCEPT\u7684\u60c5\u51b5\u4e0b\u5b9e\u73b0\u7684\uff0c\u5e76\u4e14\u6ca1\u6709\u5bf9\u8f93\u51fa\u6570\u636e\u5305\u8fdb\u884c\u9650\u5236\u3002\u672c\u8282\u5728\u4e0a\u4e00\u8282\u57fa\u7840\u4e0a\uff0c\u4ee5SSH\u548cHTTP\u6240\u4f7f\u7528\u7684\u7aef\u53e3\u4e3a\u4f8b\uff0c\u6559\u5927\u5bb6\u5982\u4f55\u5728\u9ed8\u8ba4\u94fe\u7b56\u7565\u4e3aDROP\u7684\u60c5\u51b5\u4e0b\uff0c\u8fdb\u884c\u9632\u706b\u5899\u8bbe\u7f6e\u3002\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u5c06\u5f15\u8fdb\u4e00\u79cd\u65b0\u7684\u53c2\u6570-m state\uff0c\u5e76\u68c0\u67e5\u6570\u636e\u5305\u7684\u72b6\u6001\u5b57\u6bb5\u3002<\/p>\n<p><strong>1.SSH<\/strong><\/p>\n<p># 1.\u5141\u8bb8\u63a5\u6536\u8fdc\u7a0b\u4e3b\u673a\u7684SSH\u8bf7\u6c42 iptables -A INPUT -i eth0 -p tcp \u2013dport 22 -m state \u2013state NEW,ESTABLISHED -j ACCEPT<\/p>\n<p># 2.\u5141\u8bb8\u53d1\u9001\u672c\u5730\u4e3b\u673a\u7684SSH\u54cd\u5e94 iptables -A OUTPUT -o eth0 -p tcp \u2013sport 22 -m state \u2013state ESTABLISHED -j ACCEPT<\/p>\n<ul>\n<li><strong>-m state:<\/strong>\u542f\u7528\u72b6\u6001\u5339\u914d\u6a21\u5757\uff08state matching module\uff09<\/li>\n<li><strong>\u2013-state:<\/strong>\u72b6\u6001\u5339\u914d\u6a21\u5757\u7684\u53c2\u6570\u3002\u5f53SSH\u5ba2\u6237\u7aef\u7b2c\u4e00\u4e2a\u6570\u636e\u5305\u5230\u8fbe\u670d\u52a1\u5668\u65f6\uff0c\u72b6\u6001\u5b57\u6bb5\u4e3aNEW\uff1b\u5efa\u7acb\u8fde\u63a5\u540e\u6570\u636e\u5305\u7684\u72b6\u6001\u5b57\u6bb5\u90fd\u662fESTABLISHED<\/li>\n<li><strong>\u2013sport 22:<\/strong> sshd\u76d1\u542c22\u7aef\u53e3\uff0c\u540c\u65f6\u4e5f\u901a\u8fc7\u8be5\u7aef\u53e3\u548c\u5ba2\u6237\u7aef\u5efa\u7acb\u8fde\u63a5\u3001\u4f20\u9001\u6570\u636e\u3002\u56e0\u6b64\u5bf9\u4e8eSSH\u670d\u52a1\u5668\u800c\u8a00\uff0c\u6e90\u7aef\u53e3\u5c31\u662f22<\/li>\n<li><strong>\u2013dport 22:<\/strong> ssh\u5ba2\u6237\u7aef\u7a0b\u5e8f\u53ef\u4ee5\u4ece\u672c\u673a\u7684\u968f\u673a\u7aef\u53e3\u4e0eSSH\u670d\u52a1\u5668\u768422\u7aef\u53e3\u5efa\u7acb\u8fde\u63a5\u3002\u56e0\u6b64\u5bf9\u4e8eSSH\u5ba2\u6237\u7aef\u800c\u8a00\uff0c\u76ee\u7684\u7aef\u53e3\u5c31\u662f22<\/li>\n<\/ul>\n<p>\u5982\u679c\u670d\u52a1\u5668\u4e5f\u9700\u8981\u4f7f\u7528SSH\u8fde\u63a5\u5176\u4ed6\u8fdc\u7a0b\u4e3b\u673a\uff0c\u5219\u8fd8\u9700\u8981\u589e\u52a0\u4ee5\u4e0b\u914d\u7f6e\uff1a<\/p>\n<p># 1.\u9001\u51fa\u7684\u6570\u636e\u5305\u76ee\u7684\u7aef\u53e3\u4e3a22 iptables -A OUTPUT -o eth0 -p tcp \u2013dport 22 -m state \u2013state NEW,ESTABLISHED -j ACCEPT<\/p>\n<p># 2.\u63a5\u6536\u7684\u6570\u636e\u5305\u6e90\u7aef\u53e3\u4e3a22 iptables -A INPUT -i eth0 -p tcp \u2013sport 22 -m state \u2013state ESTABLISHED -j ACCEPT<\/p>\n<p><strong>2.HTTP<\/strong><\/p>\n<p>HTTP\u7684\u914d\u7f6e\u4e0eSSH\u7c7b\u4f3c\uff1a<\/p>\n<p># 1.\u5141\u8bb8\u63a5\u6536\u8fdc\u7a0b\u4e3b\u673a\u7684HTTP\u8bf7\u6c42 iptables -A INPUT -i eth0 -p tcp \u2013dport 80 -m state \u2013state NEW,ESTABLISHED -j ACCEPT<\/p>\n<p># 1.\u5141\u8bb8\u53d1\u9001\u672c\u5730\u4e3b\u673a\u7684HTTP\u54cd\u5e94 iptables -A OUTPUT -o eth0 -p tcp \u2013sport 80 -m state \u2013state ESTABLISHED -j ACCEPT<\/p>\n<ol start=\"3\">\n<li><strong>\u5b8c\u6574\u7684\u914d\u7f6e<\/strong><\/li>\n<\/ol>\n<p># 1.\u5220\u9664\u73b0\u6709\u89c4\u5219 iptables -F<\/p>\n<p># 2.\u914d\u7f6e\u9ed8\u8ba4\u94fe\u7b56\u7565 iptables -P INPUT DROP iptables -P FORWARD DROP iptables -P OUTPUT DROP<\/p>\n<p># 3.\u5141\u8bb8\u8fdc\u7a0b\u4e3b\u673a\u8fdb\u884cSSH\u8fde\u63a5 iptables -A INPUT -i eth0 -p tcp \u2013dport 22 -m state \u2013state NEW,ESTABLISHED -j ACCEPT iptables -A OUTPUT -o eth0 -p tcp \u2013sport 22 -m state \u2013state ESTABLISHED -j ACCEPT<\/p>\n<p># 4.\u5141\u8bb8\u672c\u5730\u4e3b\u673a\u8fdb\u884cSSH\u8fde\u63a5 iptables -A OUTPUT -o eth0 -p tcp \u2013dport 22 -m state \u2013state NEW,ESTABLISHED -j ACCEPT iptables -A INPUT -i eth0 -p tcp \u2013sport 22 -m state \u2013state ESTABLISHED -j ACCEPT<\/p>\n<p># 5.\u5141\u8bb8HTTP\u8bf7\u6c42 iptables -A INPUT -i eth0 -p tcp \u2013dport 80 -m state \u2013state NEW,ESTABLISHED -j ACCEPT iptables -A OUTPUT -o eth0 -p tcp \u2013sport 80 -m state \u2013state ESTABLISHED -j ACCEPT<\/p>\n<p><strong>References<\/strong><\/p>\n<p>[1] <a href=\"http:\/\/www.thegeekstuff.com\/2011\/01\/iptables-fundamentals\/\">Linux Firewall Tutorial: IPTables Tables, Chains, Rules Fundamentals<\/a><\/p>\n<p>[2] <a href=\"http:\/\/www.thegeekstuff.com\/2011\/01\/redhat-iptables-flush\/\">IPTables Flush: Delete \/ Remove All Rules On RedHat and CentOS Linux<\/a><\/p>\n<p>[3] <a href=\"http:\/\/www.thegeekstuff.com\/2011\/02\/iptables-add-rule\/\">Linux IPTables: How to Add Firewall Rules (With Allow SSH Example)<\/a><\/p>\n<p>[4] <a href=\"http:\/\/www.thegeekstuff.com\/2011\/03\/iptables-inbound-and-outbound-rules\/\">Linux IPTables: Incoming and Outgoing Rule Examples (SSH and HTTP)<\/a><\/p>\n<p>[5] <a href=\"http:\/\/www.thegeekstuff.com\/2011\/06\/iptables-rules-examples\/\">25 Most Frequently Used Linux IPTables Rules Examples<\/a><\/p>\n<p>[6] man 8 iptables<\/p>\n<p>&nbsp;<\/p>\n","protected":false},"excerpt":{"rendered":"<p>&nbsp; iptables\u9632\u706b\u5899\u53ef\u4ee5\u7528\u4e8e\u521b\u5efa\u8fc7\u6ee4(filter)\u4e0eNAT\u89c4\u5219\u3002\u6240\u6709Linux\u53d1\u884c\u7248\u90fd\u80fd\u4f7f\u7528 [&hellip;]<\/p>\n","protected":false},"author":2,"featured_media":0,"comment_status":"open","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[18,6],"tags":[],"class_list":["post-619","post","type-post","status-publish","format-standard","hentry","category-iptables","category-6"],"_links":{"self":[{"href":"http:\/\/ijz.me\/index.php?rest_route=\/wp\/v2\/posts\/619","targetHints":{"allow":["GET"]}}],"collection":[{"href":"http:\/\/ijz.me\/index.php?rest_route=\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/ijz.me\/index.php?rest_route=\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/ijz.me\/index.php?rest_route=\/wp\/v2\/users\/2"}],"replies":[{"embeddable":true,"href":"http:\/\/ijz.me\/index.php?rest_route=%2Fwp%2Fv2%2Fcomments&post=619"}],"version-history":[{"count":0,"href":"http:\/\/ijz.me\/index.php?rest_route=\/wp\/v2\/posts\/619\/revisions"}],"wp:attachment":[{"href":"http:\/\/ijz.me\/index.php?rest_route=%2Fwp%2Fv2%2Fmedia&parent=619"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/ijz.me\/index.php?rest_route=%2Fwp%2Fv2%2Fcategories&post=619"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/ijz.me\/index.php?rest_route=%2Fwp%2Fv2%2Ftags&post=619"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}