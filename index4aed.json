{"id":782,"date":"2016-05-31T15:17:49","date_gmt":"2016-05-31T07:17:49","guid":{"rendered":"http:\/\/ijz.me\/?p=782"},"modified":"2016-05-31T15:17:49","modified_gmt":"2016-05-31T07:17:49","slug":"%e7%ab%af%e5%8f%a3%e6%89%ab%e6%8f%8f%e8%84%9a%e6%9c%ac%ef%bc%8c%e5%88%a9%e7%94%a8namp%e5%b7%a5%e5%85%b7%ef%bc%8cperl%e5%af%b9%e7%bb%93%e6%9e%9c%e8%bf%9b%e8%a1%8c%e5%a4%84%e7%90%86","status":"publish","type":"post","link":"http:\/\/ijz.me\/?p=782","title":{"rendered":"\u7aef\u53e3\u626b\u63cf\uff08namp\u626b\u63cf\uff09perl\u81ea\u52a8\u5904\u7406\u7ed3\u679c"},"content":{"rendered":"<p>\u786e\u4fdd\u670d\u52a1\u5668\u4e0a\u88c5\u4e86nmap \u5e76\u80fd\u6b63\u5e38\u6267\u884c\uff0c<br \/>\n\u786e\u4fdd\u670d\u52a1\u5668\u4e0a\u88c5\u4e86perl<br \/>\nchmod u+x scalport.pl<\/p>\n<p>\u521b\u5efa\u4e00\u4e2aip\u5217\u8868\u6587\u4ef6\uff08\u4e00\u4e2aip\u4e00\u884c\uff09all.ip<\/p>\n<p>\u6267\u884c .\/scalport.pl all.ip \u5f00\u59cb\u626b\u63cf<\/p>\n<p>\u7ed3\u679c\u4fdd\u5b58\u4e3aall.csv<br \/>\n<!--more--><\/p>\n<pre class=\"lang:default decode:true  \">#!\/usr\/bin\/env perl\nuse warnings;\nuse strict;\nmy $filename=shift @ARGV;\nopen my $IN,'&lt;',$filename or  die $!;\nmy @ip=&lt;$IN&gt;;\n\nmy $out;\n   $out=(split \/.\/,$filename)[-1] unless defined $out and $out eq \"\";\n   $out=(split \/.\/,$filename)[-2];\n   $out.=\".csv\";\nmy $port=q(80,8080,3306,9200,6379,11211,21,22);\nmy @resul;\nmy $host;\nprint  \"Start scan.n\";\nmy %result;\nopen my $OUT,'&gt;',$out or  die $!;\nfor (@ip)\n{\n  chomp;\n  next if \/(#|$)\/;\n  $host=$_;\n  my $result=`nmap -T3 -sV   -p $port  $_ `;\n  @resul= split \/n\/ms,$result;\n  for(@resul) {\n  chomp;\n  next if \/^$\/;\n  next if \/Starting Nmap\/;\n  next if \/Nmap scan report\/;\n  next if \/PORT\/;\n  next if \/filtered\/;\n  next if \/Host is up\/;\n  next if \/Service detection performed\/;\n  next if \/Nmap done:\/;\n  next if \/service unrecognized\/;\n  next if \/SF\/;\n  next if \/Service Info\/;\n  my $info=\"$host $_\";\n  $info =~s\/s+\/,\/g;\n  $info =~s\/\/tcp\/\/g;\n  print $OUT $info.\"n\";\n  }\n    print \"scan $_ ok!n\";\n}\n\nclose $OUT;<\/pre>\n<p>\u626b\u63cf\u8fc7\u7a0b\u6bd4\u8f83\u957f\uff0c\u5c24\u5176\u662f\u5f53ip\u8f83\u591a\u65f6\u5019\uff0c\u5efa\u8bae\u7528 screen \u6267\u884c<\/p>\n<p>\u626b\u63cf\u7ed3\u679c\u641c\u7d22<br \/>\n\u663e\u793a\u4e3aopen \u5e76\u4e14 \u663e\u793a\u670d\u52a1\u540d\u79f0\uff08\u6bd4\u5982Tomcat \u6216\u8005 Mysql\uff09 \u6216\u8005nginx \u5e76\u6709\u7248\u672c\u663e\u793a\u7684\u9700\u8981\u5904\u7406:<\/p>\n<p>x.x.x.x,51366,open,ssh,OpenSSH,5.3,(protocol,2.0)<br \/>\n\u9700\u8981\u5c01\u7981sshd\u7aef\u53e3<br \/>\nx.x.x.x,3306,open,mysql MySQL 5.6.19<br \/>\nMysql\u9700\u8981\u5c01\u7981\u7aef\u53e3<br \/>\nx.x.x.x,8080,open,http,Apache,Tomcat\/Coyote,JSP,engine,1.1<br \/>\nTomcat\u9700\u8981\u5c4f\u853d\u7248\u672c\u4fe1\u606f<br \/>\nx.x.x.x,80,open,http,nginx 1.9.4<br \/>\nnginx \u6709\u7248\u672c\u4fe1\u606f\u7684\u9700\u8981\u5904\u7406<\/p>\n","protected":false},"excerpt":{"rendered":"<p>\u786e\u4fdd\u670d\u52a1\u5668\u4e0a\u88c5\u4e86nmap \u5e76\u80fd\u6b63\u5e38\u6267\u884c\uff0c \u786e\u4fdd\u670d\u52a1\u5668\u4e0a\u88c5\u4e86perl chmod u+x scalport.pl [&hellip;]<\/p>\n","protected":false},"author":2,"featured_media":0,"comment_status":"open","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[21,6],"tags":[40,51],"class_list":["post-782","post","type-post","status-publish","format-standard","hentry","category-perl","category-6","tag-perl","tag-51"],"_links":{"self":[{"href":"http:\/\/ijz.me\/index.php?rest_route=\/wp\/v2\/posts\/782","targetHints":{"allow":["GET"]}}],"collection":[{"href":"http:\/\/ijz.me\/index.php?rest_route=\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/ijz.me\/index.php?rest_route=\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/ijz.me\/index.php?rest_route=\/wp\/v2\/users\/2"}],"replies":[{"embeddable":true,"href":"http:\/\/ijz.me\/index.php?rest_route=%2Fwp%2Fv2%2Fcomments&post=782"}],"version-history":[{"count":0,"href":"http:\/\/ijz.me\/index.php?rest_route=\/wp\/v2\/posts\/782\/revisions"}],"wp:attachment":[{"href":"http:\/\/ijz.me\/index.php?rest_route=%2Fwp%2Fv2%2Fmedia&parent=782"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/ijz.me\/index.php?rest_route=%2Fwp%2Fv2%2Fcategories&post=782"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/ijz.me\/index.php?rest_route=%2Fwp%2Fv2%2Ftags&post=782"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}