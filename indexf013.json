{"id":992,"date":"2018-01-11T17:46:00","date_gmt":"2018-01-11T09:46:00","guid":{"rendered":"http:\/\/ijz.me\/?p=992"},"modified":"2025-03-01T23:31:23","modified_gmt":"2025-03-01T15:31:23","slug":"%e5%85%b3%e4%ba%8eandroid-webview%e8%b7%a8%e5%9f%9f%e8%ae%bf%e9%97%ae%ef%bc%88%e5%ba%94%e7%94%a8%e5%85%8b%e9%9a%86%ef%bc%89%e6%bc%8f%e6%b4%9e","status":"publish","type":"post","link":"http:\/\/ijz.me\/?p=992","title":{"rendered":"\u5173\u4e8eAndroid WebView\u8de8\u57df\u8bbf\u95ee\uff08\u201c\u5e94\u7528\u514b\u9686\u201d\uff09\u6f0f\u6d1e"},"content":{"rendered":"\n<p><\/p>\n\n\n\n<p>\u636e\u817e\u8baf\u7384\u6b66\u5b9e\u9a8c\u5ba4\u7814\u7a76\uff0c\u5e02\u9762\u4e0a 200 \u591a\u6b3e\u5b89\u5353\u5e94\u7528\u4e2d\uff0c27\u6b3e App \u6709\u6b64\u6f0f\u6d1e\u3002\u6f0f\u6d1e\u5217\u8868\u53ca\u5f71\u54cd\u5982\u4e0b,\u5176\u4e2d18\u4e2a\u53ef\u88ab\u8fdc\u7a0b\u653b\u51fb\uff0c9\u4e2a\u53ea\u80fd\u4ece\u672c\u5730\u653b\u51fb\u3002\u6839\u636e\u56fd\u5bb6\u4fe1\u606f\u5b89\u5168\u6f0f\u6d1e\u5171\u4eab\u5e73\u53f0(cnvd)\u62ab\u9732 \uff0c\u622a\u6b62\u52302018\u5e741\u67089\u65e5\uff0c\u670911\u4e2a App \u8fdb\u884c\u4e86\u4fee\u590d\uff0c\u4f46\u5176\u4e2d3\u4e2a\u4fee\u590d\u5b58\u5728\u7f3a\u9677\u3002<\/p>\n\n\n\n<!--more-->\n\n\n\n<p>\u653b\u51fb\u8005\u5229\u7528\u8be5\u6f0f\u6d1e\uff0c\u53ef\u8fdc\u7a0b\u83b7\u53d6\u7528\u6237\u9690\u79c1\u6570\u636e(\u5305\u62ec\u624b\u673a\u5e94\u7528\u6570\u636e\u3001\u7167\u7247\u3001\u6587\u6863\u7b49\u654f\u611f\u4fe1\u606f)\uff0c\u8fd8\u53ef\u7a83\u53d6\u7528\u6237\u767b\u5f55\u51ed\u8bc1\uff0c\u5728\u53d7\u5bb3\u8005\u6beb\u65e0\u5bdf\u89c9\u7684\u60c5\u51b5\u4e0b\u5b9e\u73b0\u5bf9App\u7528\u6237\u8d26\u6237\u7684\u5b8c\u5168\u63a7\u5236\u3002\u7531\u4e8e\u8be5\u7ec4\u4ef6\u5e7f\u6cdb\u5e94\u7528\u4e8e\u5b89\u5353\u5e73\u53f0\uff0c\u5bfc\u81f4\u5927\u91cfApp\u53d7\u5f71\u54cd\uff0c\u6784\u6210\u8f83\u4e3a\u4e25\u91cd\u7684\u653b\u51fb\u5a01\u80c1\u3002\u8be5\u201c\u5e94\u7528\u514b\u9686\u201d\u7684\u79fb\u52a8\u653b\u51fb\u5a01\u80c1\u6a21\u578b\u662f\u57fa\u4e8e\u79fb\u52a8\u5e94\u7528\u7684\u4e00\u4e9b\u57fa\u672c\u8bbe\u8ba1\u7279\u70b9\u5bfc\u81f4\u7684\uff0c\u6240\u4ee5\u51e0\u4e4e\u6240\u6709\u79fb\u52a8\u5e94\u7528\u90fd\u9002\u7528\u8be5\u653b\u51fb\u6a21\u578b\u3002\u5728\u8fd9\u4e2a\u653b\u51fb\u6a21\u578b\u7684\u89c6\u89d2\u4e0b\uff0c\u5f88\u591a\u4ee5\u524d\u8ba4\u4e3a\u5a01\u80c1\u4e0d\u5927\u3001\u5382\u5546\u4e0d\u91cd\u89c6\u7684\u5b89\u5168\u95ee\u9898\uff0c\u90fd\u53ef\u4ee5\u8f7b\u677e\u201c\u514b\u9686\u201d\u7528\u6237\u8d26\u6237\uff0c\u7a83\u53d6\u9690\u79c1\u4fe1\u606f\uff0c\u76d7\u53d6\u8d26\u53f7\u53ca\u8d44\u91d1\u7b49\u3002<\/p>\n\n\n\n<h2 class=\"wp-block-heading\">\u6f0f\u6d1e\u63cf\u8ff0<\/h2>\n\n\n\n<p>WebView\u662fAndroid\u7528\u4e8e\u663e\u793a\u7f51\u9875\u7684\u63a7\u4ef6\uff0c\u662f\u4e00\u4e2a\u57fa\u4e8eWebkit\u5f15\u64ce\u3001\u5c55\u73b0Web\u9875\u9762\u3001\u89e3\u6790\u5e76\u6267\u884cJavaScript\u4ee3\u7801\u7684\u63a7\u4ef6\uff0cAndroid\u5e94\u7528\u53ef\u4ee5\u4f7f\u7528WebView\u7a7a\u95f4\uff0c\u7075\u6d3b\u7684\u6269\u5c55\u81ea\u8eab\u7684\u4e1a\u52a1\u529f\u80fd\u3002<\/p>\n\n\n\n<p>\u5e02\u9762\u4e0a\u5927\u591a\u6570\u4f7f\u7528HTML5\u6280\u672f\u5f00\u53d1\u7684\u5e94\u7528\u5747\u4f7f\u7528WebView\u8fdb\u884cHTML5\u9875\u9762\u7684\u5c55\u793a\u3002\u9664\u4e86\u4ece\u8fdc\u7a0b\u670d\u52a1\u5668\u52a0\u8f7dWeb\u9875\u9762\uff0cWebView\u8fd8\u53ef\u4ee5\u901a\u8fc7\u4fee\u6539\u7279\u5b9a\u914d\u7f6e\uff0c\u4ece\u6587\u4ef6\u4e2d\u8fdb\u884cHTML5\u9875\u9762\u7684\u52a0\u8f7d\u3002\u5728\u672a\u6b63\u786e\u914d\u7f6eWebView\u7684\u60c5\u51b5\u4e0b\uff0c\u4f1a\u81f4\u4f7fWebView\u540c\u6e90\u7b56\u7565\u5931\u6548\uff0c\u5bfc\u81f4HTTP\u534f\u8bae\u3001file\u534f\u8bae\u8de8\u6e90\u653b\u51fb\u7684\u53d1\u751f\u3002\u8be5\u6f0f\u6d1e\u4f7f\u5f97WebView\u80fd\u591f\u8bbf\u95ee\u5f53\u524d\u5e94\u7528\u5185\u90e8\u6570\u636e\uff0c\u5982\u679cWebView\u52a0\u8f7d\u4e86\u6765\u6e90\u4e0d\u660e\u7684HTML\u6587\u4ef6\uff0c\u53ef\u80fd\u5bfc\u81f4\u5f53\u524d\u5e94\u7528\u5185\u90e8\u6570\u636e\u88ab\u653b\u51fb\u8005\u7a83\u53d6\uff0c\u5982\u8eab\u4efd\u8ba4\u8bc1\u4fe1\u606f\u3001\u52a0\u5bc6\u5bc6\u94a5\u3001\u7528\u6237\u9690\u79c1\u4fe1\u606f\u7b49\u3002<\/p>\n\n\n\n<h2 class=\"wp-block-heading\">\u6f0f\u6d1e\u5206\u6790<\/h2>\n\n\n\n<p>Android\u5e94\u7528\u5185\u90e8\u5206\u53ef\u5bfc\u51fa\u7684Activity\u7ec4\u4ef6\u4e2d\uff0cWebView\u5141\u8bb8\u901a\u8fc7file URL\u5bf9http\u57df\u8fdb\u884c\u8bbf\u95ee\uff0c\u5e76\u4e14\u672a\u5bf9\u8bbf\u95ee\u8def\u5f84\u8fdb\u884c\u4e25\u683c\u6821\u9a8c\uff0c\u7531\u6b64\u5bfc\u81f4\u4e86\u672c\u6b21\u6f0f\u6d1e\u7684\u51fa\u73b0\u3002<\/p>\n\n\n\n<p>\u8be5\u6f0f\u6d1e\u7684\u4ea7\u751f\u6761\u4ef6\uff1a<\/p>\n\n\n\n<p>\uff081\uff09\u5e94\u7528\u4e2d\u5b58\u5728\u8bbe\u7f6e\u4e3a\u53ef\u88ab\u5bfc\u51fa\u7684Activity\u7ec4\u4ef6\uff0c\u5e76\u4e14\u7ec4\u4ef6\u4e2d\u5305\u542bWebview\u8c03\u7528\u3002<\/p>\n\n\n\n<p>\uff082\uff09Webview\u8c03\u7528\u4e2dsetAllowFileAccessFromFileURLs \u6216<\/p>\n\n\n\n<p>setAllowUniversalAccessFromFileURLs \u8bbe\u7f6e\u4e3atrue\uff08minSdk&lt;=4.1 \u9ed8\u8ba4\u4e3atrue\uff0cminSdk&gt;4.1 \u9ed8\u8ba4\u4e3afalse\uff09\u3002<\/p>\n\n\n\n<h2 class=\"wp-block-heading\">\u98ce\u9669\u7b49\u7ea7<\/h2>\n\n\n\n<p>\u9ad8\u5371<\/p>\n\n\n\n<h2 class=\"wp-block-heading\">\u5f71\u54cd\u8bc4\u4f30<\/h2>\n\n\n\n<p>\u6f0f\u6d1e\u5f71\u54cd\u4f7f\u7528WebView\u63a7\u4ef6\uff0c\u5f00\u542ffile\u57df\u8bbf\u95ee\u4e14\u672a\u6309\u5b89\u5168\u7b56\u7565\u5f00\u53d1\u7684\u5b89\u5353\u5e94\u7528(App)\u3002<\/p>\n\n\n\n<h3 class=\"wp-block-heading\">\u89e3\u51b3\u65b9\u6848<\/h3>\n\n\n\n<p>\u5177\u5907\u5f00\u53d1\u80fd\u529b\u7684\u4f01\u4e1a\uff0c\u8bf7\u6309\u7167\u5982\u4e0b\u68c0\u67e5\u6b65\u9aa4\u8fdb\u884c\u4fee\u590d\uff1a<\/p>\n\n\n\n<p>\uff081\uff09 \u4e25\u683c\u9650\u5236\u5305\u542bWebView\u8c03\u7528\u7684Activity\u7ec4\u4ef6\u7684\u5bfc\u51fa\u6743\u9650\uff0c\u5173\u95ed\u5bfc\u51fa\u6743\u9650\u6216\u8005\u9650\u5236\u5bfc\u51fa\u7ec4\u4ef6\u7684\u53d1\u8d77\u8005\u3002<\/p>\n\n\n\n<p>\uff082\uff09 \u5bf9\u4e8e\u529f\u80fd\u8981\u6c42\u5fc5\u987b\u5bfc\u51fa\u7684Activity\u7ec4\u4ef6\uff0c\u624b\u52a8\u8bbe\u7f6e<\/p>\n\n\n\n<p><code>setAllowFileAccessFromFileURLs\uff08false\uff09\u6216<br>setAllowUniversalAccessFromFileURLs\uff08false\uff09<\/code><\/p>\n\n\n\n<p>\uff083\uff09 \u5bf9\u4e8e\u5fc5\u987b\u4f7f\u7528file URL\u5bf9http\u57df\u8fdb\u884c\u8bbf\u95ee\u65f6\uff0c\u53ef\u5bf9\u4f20\u5165\u7684URL\u8def\u5f84\u8303\u56f4\u4e25\u683c\u63a7\u5236\uff0c\u4f8b\u5982\u5efa\u7acbURL\u767d\u540d\u5355\uff0c\u8bbe\u7f6e\u5141\u8bb8\u8bbf\u95ee\u7684URL\u5217\u8868\uff08\u4e0d\u8981\u9057\u6f0f\u8def\u5f84\u4e2d\u53ef\u80fd\u51fa\u73b0\u7684\u7279\u6b8a\u60c5\u51b5\u5982\u201c..\/..\/\u201d\u7b49\uff0c\u907f\u514d\u9650\u5236\u88ab\u7ed5\u8fc7\uff09<\/p>\n\n\n\n<p><\/p>\n","protected":false},"excerpt":{"rendered":"<p>\u636e\u817e\u8baf\u7384\u6b66\u5b9e\u9a8c\u5ba4\u7814\u7a76\uff0c\u5e02\u9762\u4e0a 200 \u591a\u6b3e\u5b89\u5353\u5e94\u7528\u4e2d\uff0c27\u6b3e App \u6709\u6b64\u6f0f\u6d1e\u3002\u6f0f\u6d1e\u5217\u8868\u53ca\u5f71\u54cd\u5982\u4e0b,\u5176\u4e2d18\u4e2a [&hellip;]<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[26,6],"tags":[51],"class_list":["post-992","post","type-post","status-publish","format-standard","hentry","category-web","category-6","tag-51"],"_links":{"self":[{"href":"http:\/\/ijz.me\/index.php?rest_route=\/wp\/v2\/posts\/992","targetHints":{"allow":["GET"]}}],"collection":[{"href":"http:\/\/ijz.me\/index.php?rest_route=\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/ijz.me\/index.php?rest_route=\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/ijz.me\/index.php?rest_route=\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/ijz.me\/index.php?rest_route=%2Fwp%2Fv2%2Fcomments&post=992"}],"version-history":[{"count":2,"href":"http:\/\/ijz.me\/index.php?rest_route=\/wp\/v2\/posts\/992\/revisions"}],"predecessor-version":[{"id":1175,"href":"http:\/\/ijz.me\/index.php?rest_route=\/wp\/v2\/posts\/992\/revisions\/1175"}],"wp:attachment":[{"href":"http:\/\/ijz.me\/index.php?rest_route=%2Fwp%2Fv2%2Fmedia&parent=992"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/ijz.me\/index.php?rest_route=%2Fwp%2Fv2%2Fcategories&post=992"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/ijz.me\/index.php?rest_route=%2Fwp%2Fv2%2Ftags&post=992"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}